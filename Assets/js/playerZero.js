!function(){"use strict";const e=(()=>{try{return JSON.parse("{\"prohibitedDomains\":[\"segment.io\",\"api.segment.io\",\"segment.com\",\"cdn.segment.com\",\"hotjar.com\",\"google-analytics.com\",\"sentry.io\",\"fullstory.com\",\"clarity.ms\",\"segment.playerzero.app\",\"getkoala.com\",\"hubspot.com\"],\"endpoint\":\"https://go.playerzero.app\",\"apiEndpoint\":\"https://sdk.playerzero.app\",\"dataset\":\"Browser\",\"apiToken\":\"66984d43432e6c4b8a2e359b\",\"allowFeedback\":false,\"applyKeyFiltering\":true,\"responseKeyReplacements\":[],\"embedderSubdomain\":null,\"captureSegmentEvents\":false,\"apiErrorPhrases\":[],\"networkPerformanceThresholdMs\":8000,\"localhostVerified\":false,\"shortcutEnabled\":false,\"production\":true,\"enableOtelHeaders\":false,\"enableOtelHeaderDomains\":[],\"projectName\":\"Pursue Networking\",\"legacyWidget\":false}")}catch(e){return JSON.parse(sessionStorage.getItem("_p0_overload_config"))}})();function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,s||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,s,i){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,s),!0;case 6:return l.fn.call(l.context,t,r,o,s,i),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||i(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(n);var r=t(n.exports),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return i}function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,s=t.length;o<s;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function h(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,u)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof d?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(e){l(s[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function p(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=c(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function f(e){return"function"==typeof e}function m(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}"function"==typeof SuppressedError&&SuppressedError;var g=m((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function y(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var v=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var i=c(s),a=i.next();!a.done;a=i.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else s.remove(this);var d=this.initialTeardown;if(f(d))try{d()}catch(e){o=e instanceof g?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var p=c(h),m=p.next();!m.done;m=p.next()){var y=m.value;try{C(y)}catch(e){o=null!=o?o:[],e instanceof g?o=l(l([],u(o)),u(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}if(o)throw new g(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)C(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&y(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&y(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),b=v.EMPTY;function I(e){return e instanceof v||e&&"closed"in e&&f(e.remove)&&f(e.add)&&f(e.unsubscribe)}function C(e){f(e)?e():e.unsubscribe()}var S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=w.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,l([e,t],u(n))):setTimeout.apply(void 0,l([e,t],u(n)))},clearTimeout:function(e){var t=w.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function A(e){w.setTimeout((function(){throw e}))}function E(){}function k(e){e()}var x=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,I(t)&&t.add(n)):n.destination=_,n}return s(t,e),t.create=function(e,t,n){return new R(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(v),T=Function.prototype.bind;function N(e,t){return T.call(e,t)}var M=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){O(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){O(e)}else O(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){O(e)}},e}(),R=function(e){function t(t,n,r){var o,s,i=e.call(this)||this;f(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:i&&S.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return i.unsubscribe()},o={next:t.next&&N(t.next,s),error:t.error&&N(t.error,s),complete:t.complete&&N(t.complete,s)}):o=t;return i.destination=new M(o),i}return s(t,e),t}(x);function O(e){A(e)}var _={closed:!0,next:E,error:function(e){throw e},complete:E},L="function"==typeof Symbol&&Symbol.observable||"@@observable";function F(e){return e}var D=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,s=(r=e)&&r instanceof x||function(e){return e&&f(e.next)&&f(e.error)&&f(e.complete)}(r)&&I(r)?e:new R(e,t,n);return k((function(){var e=o,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?o._subscribe(s):o._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=U(t))((function(t,r){var o=new R({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[L]=function(){return this},e.prototype.pipe=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(0===(e=t).length?F:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=U(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function U(e){var t;return null!==(t=null!=e?e:S.Promise)&&void 0!==t?t:Promise}function B(e){return function(t){if(function(e){return f(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function W(e,t,n,r,o){return new q(e,t,n,r,o)}var q=function(e){function t(t,n,r,o,s,i){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=i,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return s(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(x),G=m((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),V=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return s(t,e),t.prototype.lift=function(e){var t=new P(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new G},t.prototype.next=function(e){var t=this;k((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=c(t.currentObservers),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;k((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;k((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,o=n.isStopped,s=n.observers;return r||o?b:(this.currentObservers=null,s.push(e),new v((function(){t.currentObservers=null,y(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new D;return e.source=this,e},t.create=function(e,t){return new P(e,t)},t}(D),P=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return s(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:b},t}(V),Z={now:function(){return(Z.delegate||Date).now()},delegate:void 0},j=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=Z);var o=e.call(this)||this;return o._bufferSize=t,o._windowTime=n,o._timestampProvider=r,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,n),o}return s(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,o=n._buffer,s=n._infiniteTimeWindow,i=n._timestampProvider,a=n._windowTime;r||(o.push(t),!s&&o.push(i.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),o=0;o<r.length&&!e.closed;o+=n?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,o=e._infiniteTimeWindow,s=(o?1:2)*t;if(t<1/0&&s<r.length&&r.splice(0,r.length-s),!o){for(var i=n.now(),a=0,c=1;c<r.length&&r[c]<=i;c+=2)a=c;a&&r.splice(0,a+1)}},t}(V),z=function(e){function t(t,n){return e.call(this)||this}return s(t,e),t.prototype.schedule=function(e,t){return this},t}(v),K={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=K.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,l([e,t],u(n))):setInterval.apply(void 0,l([e,t],u(n)))},clearInterval:function(e){var t=K.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},H=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return s(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),K.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&K.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,y(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(z),J=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Z.now,e}(),Q=new(function(e){function t(t,n){void 0===n&&(n=J.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return s(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(J))(H),Y=Q,X=new D((function(e){return e.complete()}));function $(e){return e&&f(e.schedule)}function ee(e){return e[e.length-1]}var te=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ne(e){return f(null==e?void 0:e.then)}function re(e){return f(e[L])}function oe(e){return Symbol.asyncIterator&&f(null==e?void 0:e[Symbol.asyncIterator])}function se(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ie="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ae(e){return f(null==e?void 0:e[ie])}function ce(e){return h(this,arguments,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,d(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,d(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,d(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ue(e){return f(null==e?void 0:e.getReader)}function le(e){if(e instanceof D)return e;if(null!=e){if(re(e))return o=e,new D((function(e){var t=o[L]();if(f(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(te(e))return r=e,new D((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(ne(e))return n=e,new D((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,A)}));if(oe(e))return de(e);if(ae(e))return t=e,new D((function(e){var n,r;try{for(var o=c(t),s=o.next();!s.done;s=o.next()){var i=s.value;if(e.next(i),e.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(ue(e))return de(ce(e))}var t,n,r,o;throw se(e)}function de(e){return new D((function(t){(function(e,t){var n,r,o,s;return i(this,void 0,void 0,(function(){var i,c;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=p(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(i=r.value,t.next(i),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=a.sent(),o={error:c},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function he(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var s=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(s),!o)return s}function pe(e,t){return void 0===t&&(t=0),B((function(n,r){n.subscribe(W(r,(function(n){return he(r,e,(function(){return r.next(n)}),t)}),(function(){return he(r,e,(function(){return r.complete()}),t)}),(function(n){return he(r,e,(function(){return r.error(n)}),t)})))}))}function fe(e,t){return void 0===t&&(t=0),B((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function me(e,t){if(!e)throw new Error("Iterable cannot be null");return new D((function(n){he(n,t,(function(){var r=e[Symbol.asyncIterator]();he(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function ge(e,t){if(null!=e){if(re(e))return function(e,t){return le(e).pipe(fe(t),pe(t))}(e,t);if(te(e))return function(e,t){return new D((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(ne(e))return function(e,t){return le(e).pipe(fe(t),pe(t))}(e,t);if(oe(e))return me(e,t);if(ae(e))return function(e,t){return new D((function(n){var r;return he(n,t,(function(){r=e[ie](),he(n,t,(function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return f(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(ue(e))return function(e,t){return me(ce(e),t)}(e,t)}throw se(e)}var ye=m((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function ve(e,t){var n="object"==typeof t;return new Promise((function(r,o){var s=new R({next:function(e){r(e),s.unsubscribe()},error:o,complete:function(){n?r(t.defaultValue):o(new ye)}});e.subscribe(s)}))}function be(e,t){return B((function(n,r){var o=0;n.subscribe(W(r,(function(n){r.next(e.call(t,n,o++))})))}))}var Ie=Array.isArray;function Ce(e){return be((function(t){return function(e,t){return Ie(t)?e.apply(void 0,l([],u(t))):e(t)}(e,t)}))}function Se(e,t,n){return void 0===n&&(n=1/0),f(t)?Se((function(n,r){return be((function(e,o){return t(n,e,r,o)}))(le(e(n,r)))}),n):("number"==typeof t&&(n=t),B((function(t,r){return function(e,t,n,r,o,s,i,a){var c=[],u=0,l=0,d=!1,h=function(){!d||c.length||u||t.complete()},p=function(e){return u<r?f(e):c.push(e)},f=function(e){s&&t.next(e),u++;var a=!1;le(n(e,l++)).subscribe(W(t,(function(e){null==o||o(e),s?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{u--;for(var e=function(){var e=c.shift();i?he(t,i,(function(){return f(e)})):f(e)};c.length&&u<r;)e();h()}catch(e){t.error(e)}})))};return e.subscribe(W(t,p,(function(){d=!0,h()}))),function(){null==a||a()}}(t,r,e,n)})))}var we=["addListener","removeListener"],Ae=["addEventListener","removeEventListener"],Ee=["on","off"];function ke(e,t,n,r){if(f(n)&&(r=n,n=void 0),r)return ke(e,t,n).pipe(Ce(r));var o=u(function(e){return f(e.addEventListener)&&f(e.removeEventListener)}(e)?Ae.map((function(r){return function(o){return e[r](t,o,n)}})):function(e){return f(e.addListener)&&f(e.removeListener)}(e)?we.map(xe(e,t)):function(e){return f(e.on)&&f(e.off)}(e)?Ee.map(xe(e,t)):[],2),s=o[0],i=o[1];if(!s&&te(e))return Se((function(e){return ke(e,t,n)}))(le(e));if(!s)throw new TypeError("Invalid event target");return new D((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return s(t),function(){return i(t)}}))}function xe(e,t){return function(n){return function(r){return e[n](t,r)}}}function Te(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Y);var r=-1;return null!=t&&($(t)?n=t:r=t),new D((function(t){var o,s=(o=e)instanceof Date&&!isNaN(o)?+e-n.now():e;s<0&&(s=0);var i=0;return n.schedule((function(){t.closed||(t.next(i++),0<=r?this.schedule(void 0,r):t.complete())}),s)}))}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return $(ee(e))?e.pop():void 0}(e),r=function(e,t){return"number"==typeof ee(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?le(o[0]):function(e){return void 0===e&&(e=1/0),Se(F,e)}(r)(function(e,t){return t?ge(e,t):le(e)}(o,n)):X}var Me=Array.isArray;function Re(e,t){return B((function(n,r){var o=0;n.subscribe(W(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return f(ee(e))?e.pop():void 0}(e),r=function(e){return 1===e.length&&Me(e[0])?e[0]:e}(e);return r.length?new D((function(e){var t=r.map((function(){return[]})),o=r.map((function(){return!1}));e.add((function(){t=o=null}));for(var s=function(s){le(r[s]).subscribe(W(e,(function(r){if(t[s].push(r),t.every((function(e){return e.length}))){var i=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,l([],u(i))):i),t.some((function(e,t){return!e.length&&o[t]}))&&e.complete()}}),(function(){o[s]=!0,!t[s].length&&e.complete()})))},i=0;!e.closed&&i<r.length;i++)s(i);return function(){t=o=null}})):X}function _e(e){return B((function(t,n){var r=[];return t.subscribe(W(n,(function(e){return r.push(e)}),(function(){n.next(r),n.complete()}))),le(e).subscribe(W(n,(function(){var e=r;r=[],n.next(e)}),E)),function(){r=null}}))}function Le(e,t){return void 0===t&&(t=Q),B((function(n,r){var o=null,s=null,i=null,a=function(){if(o){o.unsubscribe(),o=null;var e=s;s=null,r.next(e)}};function c(){var n=i+e,s=t.now();if(s<n)return o=this.schedule(void 0,n-s),void r.add(o);a()}n.subscribe(W(r,(function(n){s=n,i=t.now(),o||(o=t.schedule(c,e),r.add(o))}),(function(){a(),r.complete()}),void 0,(function(){s=o=null})))}))}function Fe(e){return e<=0?function(){return X}:B((function(t,n){var r=0;t.subscribe(W(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}const De=new r,Ue=new j(1),Be="_playerzero_share",We="_playerzero_upload";function qe(e){return e.tagName&&!(["button","select","input"].includes(e.tagName.toLowerCase())&&e.hasAttribute("disabled"))}function Ge(e){return qe(e)&&!e.hasAttribute("readonly")}function Ve(e){return e.isContentEditable||"textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&["text","email","number","password","search","tel"].includes(e.type)}function Pe(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e);return t.width>0&&t.height>0&&"hidden"!==n.visibility}function Ze(e){const t=e.getBoundingClientRect(),n=Math.round(t.x+t.width/2),r=Math.round(t.y+t.height/2),o=document.elementFromPoint(n,r);if(o===e||e.contains(o))return!0;{const t=function(e){const t=e.getBoundingClientRect(),n=Math.floor(t.width/10),r=Math.floor(t.height/10);for(let o=0;o<10;o++)for(let s=0;s<10;s++){const i=Math.round(n*o+n/2),a=Math.round(r*s+r/2);if(e.contains(document.elementFromPoint(t.x+i,t.y+a)))return{x:i,y:a}}return{x:-1,y:-1}}(e);return t.x>=0&&t.y>=0}}const je=new Set(["a","button","input","textarea"]);function ze(e,t=null){let n=e;for(;null!=n.parentNode;){const e=n.innerText?.replace(/\s+/g," ")?.trim()??"";if(e.length>40||t&&!t?.(n))return;if(e.length>0)return e;n=n.parentNode}}function Ke(e){if(!["input","textarea","select"].includes(e?.tagName?.toLowerCase()))return;const t=function(e){const t=e.getAttribute("id")??"";if(t&&t.length){const e=document.querySelector(`label[for=${JSON.stringify(t)}]`);if(e&&(e?.innerText?.trim()??"").length>0)return e?.innerText?.trim()}return}(e);if(t)return t;const n=e.getAttribute("placeholder")?.trim();if(n?.trim()?.length>0)return n;const r=ze(e);if(r&&r.trim().length>0)return r;return e.getAttribute("type")??void 0}function He(e){const t=e?.tagName?.toLowerCase();if("input"===t&&["button","submit"].includes(e.getAttribute("type"))){const t=e.value;if(t)return t}else if(Ve(e)){const t=Ke(e);if(t)return t}else{if(["button","a"].includes(t))return ze(e,(t=>e===t));if("pointer"===Je(e))return ze(e,(e=>"pointer"===Je(e)))}}function Je(e){return window.getComputedStyle(e).cursor||"auto"}const Qe=new class{static recorderVersion=20;q=[];backgroundQ=[];log(...e){this.logMessageToQueue("log",...e)}debug(...e){this.logMessageToQueue("debug",...e)}info(...e){this.logMessageToQueue("info",...e)}warn(...e){this.logMessageToQueue("warn",...e)}error(...e){this.logMessageToQueue("error",...e)}emailLog(e,t){}backgroundLog(e){this.logMessageToBackgroundQueue(e)}logMessageToBackgroundQueue(e){}logMessageToQueue(e,...t){}};function Ye(e){let t=0,n=0,r=!1;for(let o=0;o<e.parentNode?.childNodes?.length;o++){const s=e.parentNode.childNodes[o];s.nodeName==e.nodeName&&(s===e?n=t:s.tagName.toLowerCase()===e.tagName.toLowerCase()&&(r=!0),t++)}return[n,r]}function Xe(e,t=document.documentElement){return t.querySelectorAll(e)?.length??0}function $e(e,t=document.documentElement){return 1===Xe(e,t)}function et(e){let t=null,n=null,r=!0,o=!0;return e.forEach((e=>{const s=e.getBoundingClientRect();t||(t=s.x),n||(n=s.y),t!==s.x&&(r=!1),n!==s.y&&(o=!1)})),r||o}var tt;!function(e){e.css="css",e.text="text"}(tt||(tt={}));class nt{strategy;static identifyingAttributes={"*":["data-test-id","data-testid","data-test","angularticsaction","angularticslabel","data-qa"],button:["aria-label"],input:["name","type","placeholder","role"],textarea:["name","type","placeholder","role"],select:["name","type"],a:["title","role"],form:["role","aria-label"]};constructor(e){this.strategy=e}static getRelevantAttributes(e){return nt.identifyingAttributes["*"].concat(nt.identifyingAttributes[e.toLowerCase()]??[])}traverseUp(e,t){let n=e;do{if(t(n))break;n=n.parentElement}while(n)}buildUniqueCssSelector(e){return{strategy:this.strategy,aligned:!0,numMatched:1,stack:[{selector:e,type:tt.css}]}}}class rt extends nt{static randomMatchers=[/[0-9]/];constructor(){super("anchored")}static isSiblingPattern(e,t,n){const r=n.querySelectorAll(t);for(const t in r)if(!this.areSiblings(e,r[t]))return!1;return!0}static areSiblings(e,t){return e===t||null!=e.parentNode&&Array.from(e.parentNode.children).some((e=>e===t))}static isRandomClassName(e){return e=e.toLowerCase(),this.isRandom(e)||e.startsWith("ng-")||e.startsWith("_")||e.includes("row")||e.includes("col")||e.includes("style")||e.includes("light")||e.includes("dark")||e.includes("sm")||e.includes("lg")||e.includes("xl")||e.includes("md")||e.includes("selected")||e.includes("checked")||e.includes("is")||e.includes("hover")||e.includes("active")||e.includes("current")||e.includes("live")||e.includes("focus")||e.includes("loading")}static isRandom(e){return this.randomMatchers.some((t=>t.test(e)))}build(e){let t=document.documentElement;const n=[];for(;t;){const[r,o]=this.findAnchorSelector(e,t);if(o&&n.push(o),r===e)return this.buildUniqueCssSelector(n.join(" "));if(!r)break;t=r}if(0===n.length)return;const r=n.join(" "),o=[];let s=null;return this.traverseUp(e,(e=>{const[t,n]=Ye(e),i=nt.getRelevantAttributes(e.tagName),a=i?.map((t=>{const n=e.getAttribute(t);return n?`[${t}=${JSON.stringify(n)}]`:null}))?.filter((e=>null!==e))??[],c=`:nth-of-type(${t+1})`;o.unshift(`${e.tagName.toLowerCase()}${a.join("")}${n?c:""}`);const u=`${r} ${o.join(" > ")}`;return!!$e(u)&&(s=u,!0)})),s&&document.querySelector(s)===e?this.buildUniqueCssSelector(s):void 0}findAnchorSelector(e,t){let n=null,r=null;return this.traverseUp(e,(e=>{if(e===t)return!0;const o=Array.from(e.classList).filter((e=>!rt.isRandomClassName(e)));for(const s of o.sort())if(rt.isSiblingPattern(e,`.${s}`,t)){if(n=e,r=`.${s}`,!$e(r,t)){const[t,n]=Ye(e);n&&(r+=`:nth-of-type(${t+1})`)}if($e(r,t))break;n=null,r=null}return!!r})),[n,r]}}const ot=[st("placeholder"),st("type"),st("aria-label"),st("name"),st("for"),st("tabindex"),st("role"),st("href"),st("id"),st("data-test"),st("data-test-id"),st("data-p0"),st("data-qa"),it(rt),it(class extends nt{constructor(){super("structural")}build(e){const t=[];return this.traverseUp(e,(e=>{const[n,r]=Ye(e),o=`:nth-of-type(${n+1})`;return t.unshift(`${e.tagName.toLowerCase()}${r?o:""}`),!!$e(t.join(" > "))})),this.buildUniqueCssSelector(t.join(" > "))}}),it(class extends nt{constructor(){super("semistructural")}build(e){const t=[];return this.traverseUp(e,(e=>{const[n,r]=Ye(e),o=nt.getRelevantAttributes(e.tagName),s=o?.map((t=>{const n=e.getAttribute(t);return n?`[${t}=${JSON.stringify(n)}]`:null}))?.filter((e=>null!==e))??[],i=`:nth-of-type(${n+1})`;return t.unshift(`${e.tagName.toLowerCase()}${s.join("")}${r?i:""}`),!!$e(t.join(" > "))})),this.buildUniqueCssSelector(t.join(" > "))}}),it(class extends nt{constructor(){super("text")}build(e){const t=e.tagName.toLowerCase();if(["div","input","select"].includes(t))return;const n=e?.innerText?.trim()??"";if(0===n.length||n.includes("\n"))return;let r=!0;return document.querySelectorAll(t).forEach((t=>{e!==t&&t?.innerText?.trim()===n&&(r=!1)})),r?{strategy:this.strategy,aligned:!0,numMatched:1,stack:[{selector:n,type:tt.text}]}:void 0}}),function(e){const t=Ke(e);return t?{strategy:"field",numMatched:1,aligned:!0,stack:[{type:tt.text,selector:t},{type:tt.css,selector:e.tagName.toLowerCase()}]}:void 0},function(e){const t=[];return e.classList.forEach((e=>{try{const n=`.${e}`;t.push({strategy:"class",numMatched:Xe(n),aligned:et(document.querySelectorAll(n)),stack:[{selector:`.${e}`,type:tt.css}]})}catch(e){}})),t.filter((e=>e.aligned))}];function st(e){return t=>{const n=t.getAttribute(e);if(!(n&&(n?.trim()?.length??0)>0))return;const r=`[${e}=${JSON.stringify(n)}]`,o=document.querySelectorAll(r);return{strategy:e,numMatched:o.length,aligned:et(o),stack:[{type:tt.css,selector:r}]}}}function it(e){const t=new e;return e=>{try{return t.build(e)}catch(t){return void Qe.error("Failed generating selector for ",e)}}}class at{static elementMetadata={input:["placeholder","name","type","role","aria-label","min","max","step"],textarea:["placeholder","name","type","role","aria-label"],select:["multi","name"]};tagName;selectors;metadata;options;cursor="auto";actionability;constructor(e){const t=at.getCleanedElement(e);this.tagName=t.tagName.toLowerCase(),this.selectors=function(e){const t=[];return ot.forEach((n=>{let r;try{r=n(e)}catch(t){return void Qe.error("Failed generating one of the selectors for ",e)}r&&(Array.isArray(r)?r.forEach((e=>{e&&t.push(e)})):t.push(r))})),t}(e),this.buildMetadata(e),this.buildActionability(e)}static getCleanedElement(e){return function(e){if(!e.isContentEditable)return e;let t=e;do{if(!t.parentElement||!t.parentElement.isContentEditable)return t;t=t.parentElement}while(t);return e}(function(e){let t=e;for(;null!=e.parentNode;)je.has(e.nodeName.toLowerCase())&&(t=e),e=e.parentNode;for(e=t;null!=e.parentNode;){if(qe(e)&&Ge(e)&&Pe(e)&&("input"===e?.tagName?.toLowerCase()||Ze(e))){t=e;break}e=e.parentNode}return t}(e))}buildMetadata(e){this.metadata=[];const t=e?.tagName?.toLowerCase();if((at.elementMetadata[t]??[]).forEach((t=>{const n=e.getAttribute(t);n&&this.metadata.push({attribute:t,value:n})})),"select"===t)this.options=[],e.querySelectorAll("option").forEach((e=>{const t=e.getAttribute("value");this.options.push({value:t,text:e?.innerText??""})}));else if("input"===t){const t=e;"file"===t.type&&(t.hasAttribute("accept")&&this.metadata.push({attribute:"accept",value:t.accept}),t.hasAttribute("multiple")&&this.metadata.push({attribute:"multiple",value:t.multiple.toString()}))}}buildActionability(e){this.cursor=Je(e),this.actionability=function(e){return{enabled:qe(e),editable:Ge(e),visible:Pe(e),receivesEvents:Ze(e)}}(e)}}function ct(e,t){let n=e[0],r=e[1],o=e[2],s=e[3];n=lt(n,r,o,s,t[0],7,-680876936),s=lt(s,n,r,o,t[1],12,-389564586),o=lt(o,s,n,r,t[2],17,606105819),r=lt(r,o,s,n,t[3],22,-1044525330),n=lt(n,r,o,s,t[4],7,-176418897),s=lt(s,n,r,o,t[5],12,1200080426),o=lt(o,s,n,r,t[6],17,-1473231341),r=lt(r,o,s,n,t[7],22,-45705983),n=lt(n,r,o,s,t[8],7,1770035416),s=lt(s,n,r,o,t[9],12,-1958414417),o=lt(o,s,n,r,t[10],17,-42063),r=lt(r,o,s,n,t[11],22,-1990404162),n=lt(n,r,o,s,t[12],7,1804603682),s=lt(s,n,r,o,t[13],12,-40341101),o=lt(o,s,n,r,t[14],17,-1502002290),r=lt(r,o,s,n,t[15],22,1236535329),n=dt(n,r,o,s,t[1],5,-165796510),s=dt(s,n,r,o,t[6],9,-1069501632),o=dt(o,s,n,r,t[11],14,643717713),r=dt(r,o,s,n,t[0],20,-373897302),n=dt(n,r,o,s,t[5],5,-701558691),s=dt(s,n,r,o,t[10],9,38016083),o=dt(o,s,n,r,t[15],14,-660478335),r=dt(r,o,s,n,t[4],20,-405537848),n=dt(n,r,o,s,t[9],5,568446438),s=dt(s,n,r,o,t[14],9,-1019803690),o=dt(o,s,n,r,t[3],14,-187363961),r=dt(r,o,s,n,t[8],20,1163531501),n=dt(n,r,o,s,t[13],5,-1444681467),s=dt(s,n,r,o,t[2],9,-51403784),o=dt(o,s,n,r,t[7],14,1735328473),r=dt(r,o,s,n,t[12],20,-1926607734),n=ht(n,r,o,s,t[5],4,-378558),s=ht(s,n,r,o,t[8],11,-2022574463),o=ht(o,s,n,r,t[11],16,1839030562),r=ht(r,o,s,n,t[14],23,-35309556),n=ht(n,r,o,s,t[1],4,-1530992060),s=ht(s,n,r,o,t[4],11,1272893353),o=ht(o,s,n,r,t[7],16,-155497632),r=ht(r,o,s,n,t[10],23,-1094730640),n=ht(n,r,o,s,t[13],4,681279174),s=ht(s,n,r,o,t[0],11,-358537222),o=ht(o,s,n,r,t[3],16,-722521979),r=ht(r,o,s,n,t[6],23,76029189),n=ht(n,r,o,s,t[9],4,-640364487),s=ht(s,n,r,o,t[12],11,-421815835),o=ht(o,s,n,r,t[15],16,530742520),r=ht(r,o,s,n,t[2],23,-995338651),n=pt(n,r,o,s,t[0],6,-198630844),s=pt(s,n,r,o,t[7],10,1126891415),o=pt(o,s,n,r,t[14],15,-1416354905),r=pt(r,o,s,n,t[5],21,-57434055),n=pt(n,r,o,s,t[12],6,1700485571),s=pt(s,n,r,o,t[3],10,-1894986606),o=pt(o,s,n,r,t[10],15,-1051523),r=pt(r,o,s,n,t[1],21,-2054922799),n=pt(n,r,o,s,t[8],6,1873313359),s=pt(s,n,r,o,t[15],10,-30611744),o=pt(o,s,n,r,t[6],15,-1560198380),r=pt(r,o,s,n,t[13],21,1309151649),n=pt(n,r,o,s,t[4],6,-145523070),s=pt(s,n,r,o,t[11],10,-1120210379),o=pt(o,s,n,r,t[2],15,718787259),r=pt(r,o,s,n,t[9],21,-343485551),e[0]=vt(n,e[0]),e[1]=vt(r,e[1]),e[2]=vt(o,e[2]),e[3]=vt(s,e[3])}function ut(e,t,n,r,o,s){return t=vt(vt(t,e),vt(r,s)),vt(t<<o|t>>>32-o,n)}function lt(e,t,n,r,o,s,i){return ut(t&n|~t&r,e,t,o,s,i)}function dt(e,t,n,r,o,s,i){return ut(t&r|n&~r,e,t,o,s,i)}function ht(e,t,n,r,o,s,i){return ut(t^n^r,e,t,o,s,i)}function pt(e,t,n,r,o,s,i){return ut(n^(t|~r),e,t,o,s,i)}function ft(e){let t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}const mt="0123456789abcdef".split("");function gt(e){let t="",n=0;for(;n<4;n++)t+=mt[e>>8*n+4&15]+mt[e>>8*n&15];return t}function yt(e){return function(e){for(let t=0;t<e.length;t++)e[t]=gt(e[t]);return e.join("")}(function(e){let t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ct(r,ft(e.substring(t-64,t)));e=e.substring(t-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(ct(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,ct(r,o),r}(e))}function vt(e,t){return e+t&4294967295}function bt(e){const t=yt(e);return null==t?"":t}class It{apiToken;static SPAN_COUNTER=Math.round(Math.random()*Number.MAX_SAFE_INTEGER);static CHECKS=new RegExp("\\b\\d{3}-?\\d{2}-?\\d{4}\\b|\\b(?:(?:\\d{3,4})[ -]?){4}\\b","gm");dataset;prod;batchEventsSize;debounceInMs;endpoint;privacy;dequeuedEvents;queuedEvent;insight={Track:{q:Array()},Log:{q:Array()},Span:{q:Array()}};currentIdentification;currentIdentificationMetadata;constructor(e,t){this.apiToken=e,this.dataset=t?.dataset??"default",this.prod=t?.prod??!1,this.batchEventsSize=t?.batchEventsSize??100,this.debounceInMs=t?.debounceInMs??2e3,this.endpoint=`${t?.endpoint??"https://sdk.playerzero.app"}`,this.queuedEvent=t?.queuedEvent,this.dequeuedEvents=t?.dequeuedEvents,console.assert(this.batchEventsSize>=0,"Negative batch sizes are not supported")}identify(e,t){if(null==e)return void(this.currentIdentification=void 0);let n="string"==typeof e?{userId:e}:{userId:e.userId,email:e.email,anonId:e.anonId};void 0===n.userId&&delete n.userId,void 0===n.email&&delete n.email,void 0===n.anonId&&delete n.anonId,this.currentIdentification=n,this.currentIdentificationMetadata={},void 0===t&&(t={});for(let e in t??{})this.currentIdentificationMetadata[`identity.${e}`]=t[e]}track(e,t){const n=this.currentIdentification;void 0===n||void 0===n.userId&&void 0===n.anonId&&void 0===n.email||this.publishInsights("Track",{id:t?.id,identity:n,value:e,type:t?.type,ts:t?.ts??new Date,properties:{...t?.properties,...this.currentIdentificationMetadata},attributes:t?.attributes})}log(e,t,n){const r={},o=t instanceof Error?t:void 0,s=o?o.message:t,i={...this.currentIdentification};n?.fp&&(r.fp=n.fp),n?.exception?.message?r["exception.message"]=n.exception.message:o?.message&&(r["exception.message"]=o.message),n?.exception?.type?r["exception.type"]=n.exception.type:o?.name&&(r["exception.type"]=o.name),n?.exception?.stacktrace?r["exception.stacktrace"]=n.exception.stacktrace:o?.stack&&(r["exception.stacktrace"]=o.stack),void 0===n?.traceId&&(Object.assign(r,this.currentIdentificationMetadata),i?.userId&&(r["identity.userId"]=i.userId),i?.email&&(r["identity.email"]=i.email),i?.anonId&&(r["identity.anonId"]=i.anonId)),this.publishInsights("Log",{id:n?.id,traceId:n?.traceId,spanId:n?.spanId,type:e,value:this.privatizeText(s),ts:n?.ts||new Date,qty:n?.qty,properties:{...n?.properties,...r},attributes:{...n?.attributes}})}span(e,t,n,r,o){const s=this.transformId(e,16),i=new Date,a=new Date(i.getTime()-r);this.publishInsights("Span",{id:o?.id??It.SPAN_COUNTER.toString(16).padStart(16,"0"),traceId:s,spanId:o?.parentId,type:t,value:n,start:a,end:i,error:o?.error,events:o?.events,properties:o?.properties,attributes:o?.attributes})}publishInsights(e,t){if(Array.isArray(t)||(t=[t]),t.length>0&&(this.insight[e].q.push(...t),t.forEach((t=>this.queuedEvent?.(e,t)))),this.insight[e].q.length>=this.batchEventsSize)return this.flushQ(e);void 0!==this.insight[e].debounce&&(clearInterval(this.insight[e].debounce),this.insight[e].debounce=void 0),this.insight[e].debounce=setInterval((()=>this.flushQ(e)),this.debounceInMs)}flushQ(e){const t=this.insight[e],n=t.q.splice(0,t.q.length);void 0!==t.debounce&&(clearInterval(t.debounce),t.debounce=void 0),0!==n.length&&fetch(`${this.endpoint}/v2/${e.toLowerCase()}s`,{method:"POST",body:JSON.stringify(n),headers:{Authorization:`Bearer ${this.apiToken}`,"X-PzSdk":"JavaScript 0.6.0","X-PzProd":`${this.prod}`,"X-PzBucket":`${this.dataset}`}}).catch((()=>[])).then((()=>this.dequeuedEvents?.(e,n)))}privatizeText(e){if(e?.length>1048576)return"";let t=e;return void 0!==this.privacy&&(t=this.privacy(t)),t.replace(It.CHECKS,"<redact>")}transformId(e,t){return e}}const Ct=new class{db=new j(1);constructor(){if(window.indexedDB){const e=indexedDB.open("playerzero",5);e.onerror=e=>{this.db.error(e),this.db.complete()},e.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("checksum_cache")){t.createObjectStore("checksum_cache").createIndex("at","at")}t.objectStoreNames.contains("telemetry_q")||t.createObjectStore("telemetry_q"),t.objectStoreNames.contains("resource_q")||t.createObjectStore("resource_q"),Array.from(t.objectStoreNames).filter((e=>-1===["checksum_cache","resource_q","telemetry_q"].indexOf(e))).forEach((e=>t.deleteObjectStore(e)))},e.onsuccess=e=>this.db.next(e.target.result)}else this.db.next(void 0),this.db.complete()}ready(){return ve(new D((e=>{this.db.pipe(Fe(1)).subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()})})))}get(e,t){return ve(new D((n=>{this.db.pipe(Fe(1)).subscribe((r=>{if(void 0!==r)try{const o=r.transaction([e],"readonly"),s=o.objectStore(e).get(t);s.onerror=e=>n.error(e.target.error),s.onsuccess=e=>{n.next(e.target.result),n.complete()}}catch(e){n.error(e)}else n.error("IndexDB not supported!")}))})))}put(e,t,n){return ve(new D((r=>{this.db.pipe(Fe(1)).subscribe((o=>{if(void 0!==o)try{const s=o.transaction([e],"readwrite"),i=s.objectStore(e).put(n,t);i.onerror=e=>r.error(e.target.error),i.onsuccess=e=>{r.next(e.target.result),r.complete()}}catch(e){r.error(e)}else r.error("IndexDB not supported!")}))})))}delete(e,t){return ve(new D((n=>{this.db.pipe(Fe(1)).subscribe((r=>{if(void 0!==r)try{const o=r.transaction([e],"readwrite"),s=o.objectStore(e).delete(t);s.onerror=e=>n.error(e.target.error),s.onsuccess=e=>{n.next(e.target.result),n.complete()}}catch(e){n.error(e)}else n.error("IndexDB not supported!")}))})))}query(e,t){return ve(new D((n=>{this.db.pipe(Fe(1)).subscribe((r=>{if(void 0!==r)try{const o=r.transaction([e],"readonly"),s=o.objectStore(e).openCursor(t),i=[];s.onerror=e=>n.error(e.target.error),s.onsuccess=e=>{const t=e.target.result;t?(i.push(t.value),t.continue()):(n.next(i),n.complete())}}catch(e){n.error(e)}else n.error("IndexDB not supported!")}))})))}},St=new It("66984d43432e6c4b8a2e359b",{dataset:e.dataset??"Browser",prod:e.production,batchEventsSize:100,debounceInMs:500,endpoint:e.apiEndpoint,queuedEvent:(e,t)=>Ct.put("telemetry_q",t.id,t).catch(E),dequeuedEvents:(e,t)=>t.forEach((e=>Ct.delete("telemetry_q",e.id).catch(E))),restoreQueue:async()=>await Ct.query("telemetry_q").catch((()=>[]))}),wt="requestIdleCallback"in window?window.requestIdleCallback.bind(window):e=>setTimeout(e,0);function At(e){return new Promise((t=>wt((()=>t(e())))))}function Et(){return new Date}const kt=18,xt=262143,Tt=786432,Nt=1<<30;function Mt(e,t){return-786433&e|t<<kt}function Rt(e,t,n){const r=(e.flags&xt)>>>0;if(r>=1){const o=t?e.rejectHandler0:e.fulfillHandler0;o&&o(n),e.flags&=-262144,e.fulfillHandler0=null,e.rejectHandler0=null;for(let o=0;o<r-1;++o){const r=e[2*o+t];r&&r(n),e[2*o]=null,e[2*o+1]=null}return!0}return!1}function Ot(e,t,n,r=!1,o=!1){function s(r){let s=!1,i=r;try{e?(i=e(r),s=!0):o?n(r):s=!0}catch(e){s=!1,n(e)}if(s){const e=i&&i.then;e&&"function"==typeof e?e.call(i,t,n):t(i)}}return r?e=>{setTimeout((()=>{s(e)}),0)}:s}class _t{flags;result;fulfillHandler0;rejectHandler0;_fulfilledNonPending;_rejectedNonPending;constructor(e,t){this.flags=(t||0)<<20,this.result=null,this.fulfillHandler0=null,this.rejectHandler0=null,e&&function(e,t,n){try{e(t,n)}catch(e){n(e)}}(e,this.dangerouslyResolve.bind(this),this.dangerouslyReject.bind(this))}static resolve(e,t){const n=e&&e.then;if("function"==typeof n)return new _t(((t,r)=>{n.call(e,t,r)}),t);{const n=new _t(null,t);return n.flags=Mt(n.flags,1),n.result=e,n}}static reject(e,t){const n=new _t(null,t);return n.flags=Mt(n.flags,2),n.result=e,n}static method(e,t){try{return _t.resolve(e(),t)}catch(e){return _t.reject(e,t)}}static all(e){const t=Array.isArray(e)?e:Array.from(e);return t.length?new _t(((e,n)=>{let r=0;const o=[];let s=!1;function i(t,n){return i=>{s||(o[t]=i,++r,r===n&&(s=!0,e(o)))}}for(let e=0,r=t.length;e<r;++e){const o=t[e],a=o&&o.then;a&&"function"==typeof a?a.call(o,i(e,r),(e=>{s||(n(e),s=!0)})):i(e,r)(o)}})):_t.resolve([])}static race(e){const t=Array.isArray(e)?e:Array.from(e);return t.length?new _t(((e,n)=>{let r=!1;function o(t){r||(e(t),r=!0)}function s(e){r||(n(e),r=!0)}for(let e=0,n=t.length;e<n;++e){const n=t[e],r=n&&n.then;r&&"function"==typeof r?r.call(n,o,s):o(n)}})):new _t}static reduce(e,t,n){const r=e.length;return e.reduce(((e,n,o)=>e.then((e=>_t.resolve(n).then((n=>t(e,n,o,r)))))),_t.resolve(n))}static waterfall(e,t){const n=e.length;return e.reduce(((e,r,o)=>e.then((e=>_t.resolve(r).then((e=>t(e,o,n)))))),_t.resolve())}static delay(e){return new _t((t=>{setTimeout(t,e||0)}))}static defer(){return _t.delay(0)}then(e,t){const n=this.flags,r=(1072693248&n)>>>20,o=r>=1e3;switch((n&Tt)>>>kt){case 1:return e?(this.flags|=Nt,o?_t.defer().then((()=>e&&e(this.result))):_t.method((()=>e&&e(this.result)),r+1)):this;case 2:return t?(this.flags|=Nt,o?_t.defer().then((()=>t&&t(this.result))):_t.method((()=>t&&t(this.result)),r+1)):this;default:return this.flags|=Nt,new _t(((n,r)=>{!function(e,t,n){const r=(e.flags&xt)>>>0;if(r>=131072)throw new Error("Too many handlers on SyncPromise");if(r){const o=r-1;e[2*o]=t,e[2*o+1]=n}else e.fulfillHandler0=t,e.rejectHandler0=n;++e.flags}(this,Ot(e,n,r,o),Ot(t,n,r,o,!0))}),o?0:r+1)}}catch(e){return this.then(null,e)}finally(e){return this.then((t=>(e(void 0),t)),(t=>{throw e(void 0),t}))}isPending(){return 0===(this.flags&Tt)>>>kt}isSettled(){return 0!==(this.flags&Tt)>>>kt}isFulfilled(){return 1===(this.flags&Tt)>>>kt}isRejected(){return 2===(this.flags&Tt)>>>kt}async(){return _t.resolve(this,1e3)}getValueSync(){if(this.isFulfilled())return this.result}getExceptionSync(){if(this.isRejected())return this.flags|=Nt,this.result}thenSync(e){return this.isSettled()?this.then(e):this}thenAsync(e,t){if(this.isPending()){let n=!1;if(t)try{t((()=>{n=!0}))}catch(e){return _t.reject(e)}return this.then((t=>{if(!n)return e(t)}))}return this}catchSync(e){return this.isSettled()?this.catch(e):this}catchAsync(e){return this.isPending()?this.catch(e):this}dangerouslyResolve(e){const t=this.flags;if(0===(this.flags&Tt)>>>kt){const n=e&&e.then;n&&"function"==typeof n?n.call(e,this.dangerouslyResolve.bind(this),this.dangerouslyReject.bind(this)):(this.result=e,this.flags=Mt(t,1),Rt(this,0,e))}else Qe.warn("Fulfilling non-pending SyncPromise",this),this._fulfilledNonPending=!0}dangerouslyReject(e){const t=this.flags;0===(t&Tt)>>>kt?(this.result=e,this.flags=Mt(t,2),Rt(this,1,e)):(Qe.warn("Rejecting non-pending SyncPromise",this),this._rejectedNonPending=!0)}}function Lt(e){return new _t(((t,n)=>{e.onsuccess=()=>{t(e.result)},e.onerror=()=>{n(e.error)}}))}class Ft{STORE_NAME;constructor(e){this.STORE_NAME=e}get db(){return new _t(((e,t)=>{Ct.ready().then((t=>{e(t)})).catch((e=>{t(e)}))}))}transaction(e="readonly"){return new _t(((t,n)=>{this.db.then((r=>{const o=r.transaction(this.STORE_NAME,e);o.onerror=n,o.onabort=n,t(o.objectStore(this.STORE_NAME))})).catch(n)}))}put(e){return new _t(((t,n)=>{this.transaction("readwrite").then((r=>{Lt(r.put(e)).then((e=>{t(e)})).catch(n)})).catch(n)}))}upsert(e,t={},n={}){return new _t(e?(r,o)=>{this.transaction("readwrite").then((s=>{Lt(s.get(e)).catch((()=>n)).then((e=>{e||(e=n);const i=Object.assign(e,t);Lt(s.put(i)).then((()=>r(i))).catch(o)})).catch(o)})).catch(o)}:e=>e())}addToList(e,t,n){return Array.isArray(n)?new _t(((r,o)=>{this.transaction("readwrite").then((s=>{Lt(s.get(e)).then((e=>{e[t].push(...n),Lt(s.put(e)).then((()=>r(e))).catch(o)})).catch(o)})).catch(o)})):_t.reject()}size(){return new Promise(((e,t)=>{this.transaction("readonly").then((n=>{const r=n.count();r.onsuccess=()=>{e(r.result)},r.onerror=()=>{t(r.error)}}))}))}clear(){return new Promise(((e,t)=>{this.transaction("readwrite").then((n=>{const r=n.clear();r.onsuccess=()=>{e(!0)},r.onerror=()=>{t()}}))}))}idbForEachCursor(e,t){return new _t(((n,r)=>{e.onsuccess=e=>{const r=e.target.result;r?t(r.value,r).then((()=>r.continue())):n()},e.onerror=()=>{r(e.error)}}))}}class Dt extends Ft{static STALE_TIME_RANGE=24192e5;memCache={};constructor(){super("checksum_cache"),At((()=>this.deleteStaleResources()))}deleteStaleResources(){const e=Date.now()-Dt.STALE_TIME_RANGE;return new _t(((t,n)=>{this.transaction("readwrite").then((r=>{this.idbForEachCursor(r.index("at").openKeyCursor(IDBKeyRange.upperBound(e,!0)),((e,t)=>Lt(r.delete(t.primaryKey)))).then(t).catch(n)})).catch(n)}))}remember(e,t=new Date){const n={at:t.getTime()};return this.memCache[e]=t.getTime(),Ct.put(this.STORE_NAME,e,n)}unremember(e){return this.memCache[e]=null,Ct.delete(this.STORE_NAME,e)}lastUploaded(e){const t=this.memCache[e];return void 0!==t?Promise.resolve(null===t?null:new Date(t)):new Promise(((t,n)=>{Ct.get(this.STORE_NAME,e).then((n=>{this.memCache[e]=n.at,t(new Date(n.at))})).catch((()=>{this.memCache[e]=null,t(null)}))})).catch((()=>null))}}const Ut=new Dt;const Bt=new class extends Ft{constructor(){super("resource_q")}requestId(e){return`${e.type}:${e.typeId}:${e.property}`}put(e){return _t.resolve(Ct.put("resource_q",this.requestId(e),e)).catch((()=>""))}dequeue(e){return Ct.delete("resource_q",this.requestId(e)).catch(E)}getAllQueued(){return Ct.query("resource_q").catch((()=>[]))}};class Wt{destructors=[];constructor(){De.on("kill",this.destruct.bind(this))}destruct(){this.destructors.forEach((e=>e())),this.destructors=[]}listen(e,t){document.addEventListener(e,t,{capture:!0,passive:!0}),this.destructors.push((()=>document.removeEventListener(e,t,{capture:!0})))}windowListen(e,t){window.addEventListener(e,t,{capture:!0,passive:!0}),this.destructors.push((()=>window.removeEventListener(e,t,{capture:!0})))}subscribe(e,t){const n=e.subscribe(t);this.destructors.push((()=>n.unsubscribe()))}}const qt=new class{uploadSpeedStream=new j(5);downloadSpeedStream=new j(5);get downloadSpeed(){return this.downloadSpeedStream,0}get uploadStream(){return 0}logUploadSpeed(e,t){this.uploadSpeedStream.next(e/t*.008)}logDownloadSpeed(e,t){this.downloadSpeedStream.next(e/t*.008)}};class Gt extends Wt{static BUFFER_TIME=1e4;static MAX_BUFFER_SIZE=1048576;static MAX_QUEUE_SIZE=1e4;bufferedQ=new V;flushBufferStream=new V;bufferSizeBytes=0;inFlightResources=new Set;constructor(){super(),this.subscribe(function(e,t){return void 0===e&&(e=0),void 0===t&&(t=Q),e<0&&(e=0),Te(e,e,t)}(Gt.BUFFER_TIME),(()=>this.flushResources())),this.subscribe(this.bufferedQ.pipe(Re((e=>void 0!==e.resource)),Re((e=>void 0!==e.resource.checksum)),Re((e=>void 0!==e.resource.content)),_e(this.flushBufferStream)),(e=>{this.prepareAndSend(e)})),this.subscribe(Ne(ke(window,"load"),ke(window,"DOMContentLoaded")).pipe(Le(250)),(()=>{At((()=>{Bt.size().then((e=>e>Gt.MAX_QUEUE_SIZE?Bt.clear():Promise.resolve(!1))).then((e=>e?Promise.resolve():Bt.getAllQueued().then((e=>{e.forEach((e=>{this.addToStream(e)}))})))).catch(E)})).catch(E)}))}queueResource(e,t,n,r){if(!r?.checksum)return Promise.resolve();if(!r?.content)return Promise.resolve();const o={typeId:e,type:t,property:n,resource:{...r}};return Bt.put(o).then((()=>this.addToStream(o)))}addToStream(e){this.bufferSizeBytes+=e.resource.content.length,this.bufferedQ.next(e),this.bufferSizeBytes>Gt.MAX_BUFFER_SIZE&&this.flushResources()}flushResources(){this.flushBufferStream.next()}async prepareAndSend(t){if(this.bufferSizeBytes=0,0===(t=t.filter((e=>!this.inFlightResources.has(Bt.requestId(e))))).length)return;t.forEach((e=>this.inFlightResources.add(Bt.requestId(e))));const n=this,r=()=>t.forEach((e=>n.inFlightResources.delete(Bt.requestId(e))));let o=await Promise.all(t.map((e=>Ut.lastUploaded(e.resource.checksum))));o.length!==t.length&&(o=Array(t.length).fill(null));const s={},i=[];t.forEach(((e,t)=>{null===o[t]&&(s[e.resource.checksum]=new File([new Blob([e.resource.content])],e.resource.checksum,{type:e.resource.contentType}),e.resource.included=!0),e.resource.content=void 0,i.push(e)}));let a=0;const c=new FormData,u=JSON.stringify({resources:i});c.append("entrypoint",u),a+=u.length,Object.keys(s).forEach((e=>{a+=s[e].size,c.append(e,s[e])})),Object.keys(s).length>1&&(a+=40*Object.keys(s).length+600),a=Math.ceil(a);const l=new XMLHttpRequest,d=performance.now();l.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE)if(200===this.status){qt.logUploadSpeed(a,performance.now()-d);const e=JSON.parse(this.responseText),r=new Set(e);t.forEach((e=>Bt.dequeue(e).then((()=>r.has(e.resource.checksum)?Ut.remember(e.resource.checksum).then(E):Promise.resolve())).finally((()=>n.inFlightResources.delete(Bt.requestId(e))))))}else r()},l.onerror=()=>r(),l.onabort=()=>r(),l.ontimeout=()=>r(),l.open("POST",`${e.endpoint}/api/record/resource`),l.setRequestHeader("X-SDK-VERSION","main-SNAPSHOT"),l.setRequestHeader("X-PROJECT-TOKEN","66984d43432e6c4b8a2e359b"),l.send(c)}}const Vt=new Gt;let Pt;const Zt=new Uint8Array(16);function jt(){if(!Pt&&(Pt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pt(Zt)}const zt=[];for(let e=0;e<256;++e)zt.push((e+256).toString(16).slice(1));var Kt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ht(e,t,n){if(Kt.randomUUID&&!t&&!e)return Kt.randomUUID();const r=(e=e||{}).random||(e.rng||jt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return zt[e[t+0]]+zt[e[t+1]]+zt[e[t+2]]+zt[e[t+3]]+"-"+zt[e[t+4]]+zt[e[t+5]]+"-"+zt[e[t+6]]+zt[e[t+7]]+"-"+zt[e[t+8]]+zt[e[t+9]]+"-"+zt[e[t+10]]+zt[e[t+11]]+zt[e[t+12]]+zt[e[t+13]]+zt[e[t+14]]+zt[e[t+15]]}(r)}class Jt{storage;setOnInit;static STORAGE_KEY="_playerzero_store";constructor(e,t){this.storage=e,this.setOnInit=t,this.overrideStorageClear(),this.inValidState()||this.storage.setItem(Jt.STORAGE_KEY,JSON.stringify(t))}getStorageData(e){const t=JSON.parse(this.storage.getItem(Jt.STORAGE_KEY))||this.setOnInit;return t?.[e]??this.setOnInit[e]}setStorageData(e,t){try{const n=JSON.parse(this.storage.getItem(Jt.STORAGE_KEY))||this.setOnInit;return n[e]=t,this.storage.setItem(Jt.STORAGE_KEY,JSON.stringify(n)),!0}catch(e){return!1}}getCleanedStorage(){const e={};return Object.keys(this.storage).forEach((t=>{t!==Jt.STORAGE_KEY&&"_p0_overload_config"!==t&&(e[t]=this.storage.getItem(t))})),e}inValidState(){try{const e=this.storage.getItem(Jt.STORAGE_KEY);if(!e||0===e.length||"null"===e)return!1;const t=JSON.parse(e);return Boolean(t)}catch(e){return!1}}cleanup(e){const t=this.storage.getItem(Jt.STORAGE_KEY);if(!t||0===e.length)return;const n=JSON.parse(t);e.forEach((e=>delete n[e])),this.storage.setItem(Jt.STORAGE_KEY,JSON.stringify(n))}overrideStorageClear(){const e=Storage.prototype.clear;Storage.prototype.clear=function(){const t=this.getItem(Jt.STORAGE_KEY),n=e.apply(this);return this.setItem(Jt.STORAGE_KEY,t),n}}}const Qt=new Jt(localStorage,{Identity:void 0}),Yt=new Jt(sessionStorage,{Identity:void 0,TabId:Ht(),LastPage:""});var Xt;function $t(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function en(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function tn(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(nn).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function nn(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=tn(e.styleSheet)||t}catch(e){}return t}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Xt||(Xt={}));var rn=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function on(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,s=e.maskInputFn,i=o||"";return(t[n.toLowerCase()]||t[r])&&(i=s?s(i):"*".repeat(i.length)),i}var sn="__rrweb_original__";var an,cn,un=1,ln=new RegExp("[^a-z0-9-_:]"),dn=-2;function hn(){return un++}var pn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,fn=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,mn=/^(data:)([^,]*),(.*)/i;function gn(e,t){return(e||"").replace(pn,(function(e,n,r,o,s,i){var a,c=r||s||i,u=n||o||"";if(!c)return e;if(!fn.test(c))return"url(".concat(u).concat(c).concat(u,")");if(mn.test(c))return"url(".concat(u).concat(c).concat(u,")");if("/"===c[0])return"url(".concat(u).concat((a=t,(a.indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+c)).concat(u,")");var l=t.split("/"),d=c.split("/");l.pop();for(var h=0,p=d;h<p.length;h++){var f=p[h];"."!==f&&(".."===f?l.pop():l.push(f))}return"url(".concat(u).concat(l.join("/")).concat(u,")")}))}var yn=/^[^ \t\n\r\u000c]+/,vn=/^[, \t\n\r\u000c]+/;function bn(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function In(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Cn(){var e=document.createElement("a");return e.href="",e.href}function Sn(e,t,n,r){return"src"===n||"href"===n&&r&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&r&&"#"!==r[0]?bn(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(vn),!(n>=t.length);){var s=r(yn);if(","===s.slice(-1))s=bn(e,s.substring(0,s.length-1)),o.push(s);else{var i="";s=bn(e,s);for(var a=!1;;){var c=t.charAt(n);if(""===c){o.push((s+i).trim());break}if(a)")"===c&&(a=!1);else{if(","===c){n+=1,o.push((s+i).trim());break}"("===c&&(a=!0)}i+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?gn(r,Cn()):"object"===t&&"data"===n&&r?bn(e,r):r:bn(e,r)}function wn(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&wn(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&wn(e.parentNode,t,n)}function An(e,t,n){var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(wn(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}return!1}function En(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,s=t.blockSelector,i=t.maskTextClass,a=t.maskTextSelector,c=t.inlineStylesheet,u=t.maskInputOptions,l=void 0===u?{}:u,d=t.maskTextFn,h=t.maskInputFn,p=t.dataURLOptions,f=void 0===p?{}:p,m=t.inlineImages,g=t.recordCanvas,y=t.keepIframeSrcFn,v=t.newlyAddedElement,b=void 0!==v&&v,I=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Xt.Document,childNodes:[],compatMode:e.compatMode}:{type:Xt.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Xt.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:I};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,s=t.inlineStylesheet,i=t.maskInputOptions,a=void 0===i?{}:i,c=t.maskInputFn,u=t.dataURLOptions,l=void 0===u?{}:u,d=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,f=t.newlyAddedElement,m=void 0!==f&&f,g=t.rootId,y=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(e,r,o),v=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return ln.test(t)?"div":t}(e),b={},I=e.attributes.length,C=0;C<I;C++){var S=e.attributes[C];b[S.name]=Sn(n,v,S.name,S.value)}if("link"===v&&s){var w=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),A=null;w&&(A=tn(w)),A&&(delete b.rel,delete b.href,b._cssText=gn(A,w.href))}if("style"===v&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(A=tn(e.sheet))&&(b._cssText=gn(A,Cn()))}if("input"===v||"textarea"===v||"select"===v){var E=e.value,k=e.checked;"radio"!==b.type&&"checkbox"!==b.type&&"submit"!==b.type&&"button"!==b.type&&E?b.value=on({type:b.type,tagName:v,value:E,maskInputOptions:a,maskInputFn:c}):k&&(b.checked=k)}"option"===v&&(e.selected&&!a.select?b.selected=!0:delete b.selected);if("canvas"===v&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,s=sn in o?o[sn]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(b.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){var x=e.toDataURL(l.type,l.quality),T=document.createElement("canvas");T.width=e.width,T.height=e.height,x!==T.toDataURL(l.type,l.quality)&&(b.rr_dataURL=x)}if("img"===v&&d){an||(an=n.createElement("canvas"),cn=an.getContext("2d"));var N=e,M=N.crossOrigin;N.crossOrigin="anonymous";var R=function(){try{an.width=N.naturalWidth,an.height=N.naturalHeight,cn.drawImage(N,0,0),b.rr_dataURL=an.toDataURL(l.type,l.quality)}catch(e){console.warn("Cannot inline img src=".concat(N.currentSrc,"! Error: ").concat(e))}M?b.crossOrigin=M:N.removeAttribute("crossorigin")};N.complete&&0!==N.naturalWidth?R():N.onload=R}"audio"!==v&&"video"!==v||(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime);m||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop));if(y){var O=e.getBoundingClientRect(),_=O.width,L=O.height;b={class:b.class,rr_width:"".concat(_,"px"),rr_height:"".concat(L,"px")}}"iframe"!==v||p(b.src)||(e.contentDocument||(b.rr_src=b.src),delete b.src);return{type:Xt.Element,tagName:v,attributes:b,childNodes:[],isSVG:In(e)||void 0,needBlock:y,rootId:g}}(e,{doc:n,blockClass:o,blockSelector:s,inlineStylesheet:c,maskInputOptions:l,maskInputFn:h,dataURLOptions:f,inlineImages:m,recordCanvas:g,keepIframeSrcFn:y,newlyAddedElement:b,rootId:I});case e.TEXT_NODE:return function(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,s=t.maskTextFn,i=t.rootId,a=e.parentNode&&e.parentNode.tagName,c=e.textContent,u="STYLE"===a||void 0,l="SCRIPT"===a||void 0;if(u&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=(d=e.parentNode.sheet).cssRules?Array.from(d.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}c=gn(c,Cn())}var d;l&&(c="SCRIPT_PLACEHOLDER");!u&&!l&&c&&An(e,r,o)&&(c=s?s(c):c.replace(/[\S]/g,"*"));return{type:Xt.Text,textContent:c||"",isStyle:u,rootId:i}}(e,{maskTextClass:i,maskTextSelector:a,maskTextFn:d,rootId:I});case e.CDATA_SECTION_NODE:return{type:Xt.CDATA,textContent:"",rootId:I};case e.COMMENT_NODE:return{type:Xt.Comment,textContent:e.textContent||"",rootId:I};default:return!1}}function kn(e){return void 0===e?"":e.toLowerCase()}function xn(e,t){var n,r=t.doc,o=t.mirror,s=t.blockClass,i=t.blockSelector,a=t.maskTextClass,c=t.maskTextSelector,u=t.skipChild,l=void 0!==u&&u,d=t.inlineStylesheet,h=void 0===d||d,p=t.maskInputOptions,f=void 0===p?{}:p,m=t.maskTextFn,g=t.maskInputFn,y=t.slimDOMOptions,v=t.dataURLOptions,b=void 0===v?{}:v,I=t.inlineImages,C=void 0!==I&&I,S=t.recordCanvas,w=void 0!==S&&S,A=t.onSerialize,E=t.onIframeLoad,k=t.iframeLoadTimeout,x=void 0===k?5e3:k,T=t.onStylesheetLoad,N=t.stylesheetLoadTimeout,M=void 0===N?5e3:N,R=t.keepIframeSrcFn,O=void 0===R?function(){return!1}:R,_=t.newlyAddedElement,L=void 0!==_&&_,F=t.preserveWhiteSpace,D=void 0===F||F,U=En(e,{doc:r,mirror:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:f,maskTextFn:m,maskInputFn:g,dataURLOptions:b,inlineImages:C,recordCanvas:w,keepIframeSrcFn:O,newlyAddedElement:L});if(!U)return console.warn(e,"not serialized"),null;n=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===Xt.Comment)return!0;if(e.type===Xt.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(kn(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===kn(e.attributes.name)||"icon"===kn(e.attributes.rel)||"apple-touch-icon"===kn(e.attributes.rel)||"shortcut icon"===kn(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&kn(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(kn(e.attributes.property).match(/^(og|twitter|fb):/)||kn(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===kn(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===kn(e.attributes.name)||"googlebot"===kn(e.attributes.name)||"bingbot"===kn(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===kn(e.attributes.name)||"generator"===kn(e.attributes.name)||"framework"===kn(e.attributes.name)||"publisher"===kn(e.attributes.name)||"progid"===kn(e.attributes.name)||kn(e.attributes.property).match(/^article:/)||kn(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===kn(e.attributes.name)||"yandex-verification"===kn(e.attributes.name)||"csrf-token"===kn(e.attributes.name)||"p:domain_verify"===kn(e.attributes.name)||"verify-v1"===kn(e.attributes.name)||"verification"===kn(e.attributes.name)||"shopify-checkout-api-token"===kn(e.attributes.name)))return!0}}return!1}(U,y)&&(D||U.type!==Xt.Text||U.isStyle||U.textContent.replace(/^\s+|\s+$/gm,"").length)?hn():dn;var B=Object.assign(U,{id:n});if(o.add(e,B),n===dn)return null;A&&A(e);var W=!l;if(B.type===Xt.Element){W=W&&!B.needBlock,delete B.needBlock;var q=e.shadowRoot;q&&en(q)&&(B.isShadowHost=!0)}if((B.type===Xt.Document||B.type===Xt.Element)&&W){y.headWhitespace&&B.type===Xt.Element&&"head"===B.tagName&&(D=!1);for(var G={doc:r,mirror:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,skipChild:l,inlineStylesheet:h,maskInputOptions:f,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:b,inlineImages:C,recordCanvas:w,preserveWhiteSpace:D,onSerialize:A,onIframeLoad:E,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:O},V=0,P=Array.from(e.childNodes);V<P.length;V++){(z=xn(P[V],G))&&B.childNodes.push(z)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var Z=0,j=Array.from(e.shadowRoot.childNodes);Z<j.length;Z++){var z;(z=xn(j[Z],G))&&(en(e.shadowRoot)&&(z.isShadow=!0),B.childNodes.push(z))}}return e.parentNode&&$t(e.parentNode)&&en(e.parentNode)&&(B.isShadow=!0),B.type===Xt.Element&&"iframe"===B.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var a=setTimeout((function(){s||(t(),s=!0)}),n);e.addEventListener("load",(function(){clearTimeout(a),s=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&E){var n=xn(t,{doc:t,mirror:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:b,inlineImages:C,recordCanvas:w,preserveWhiteSpace:D,onSerialize:A,onIframeLoad:E,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:O});n&&E(e,n)}}),x),B.type===Xt.Element&&"link"===B.tagName&&"stylesheet"===B.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var s=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),o=!0,t()}))}}(e,(function(){if(T){var t=xn(e,{doc:r,mirror:o,blockClass:s,blockSelector:i,maskTextClass:a,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskTextFn:m,maskInputFn:g,slimDOMOptions:y,dataURLOptions:b,inlineImages:C,recordCanvas:w,preserveWhiteSpace:D,onSerialize:A,onIframeLoad:E,iframeLoadTimeout:x,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:O});t&&T(e,t)}}),M),B}function Tn(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Nn="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Mn={map:{},getId:()=>(console.error(Nn),-1),getNode:()=>(console.error(Nn),null),removeNodeFromMap(){console.error(Nn)},has:()=>(console.error(Nn),!1),reset(){console.error(Nn)}};function Rn(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function On(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>On(e,t,s||{},!0)}function _n(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function Ln(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Fn(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Dn(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(wn(o,t,r))return!0;if(n){if(e.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function Un(e,t){return t.getId(e)===dn}function Bn(e,t){if($t(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Bn(e.parentNode,t))}function Wn(e){return Boolean(e.changedTouches)}function qn(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Gn(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Vn(e){return Boolean(null==e?void 0:e.shadowRoot)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Mn=new Proxy(Mn,{get:(e,t,n)=>("map"===t&&console.error(Nn),Reflect.get(e,t,n))}));class Pn{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var Zn=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Zn||{}),jn=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(jn||{}),zn=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(zn||{}),Kn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Kn||{});function Hn(e){return"__ln"in e}class Jn{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Hn(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Hn(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const Qn=(e,t)=>`${e}@${t}`;class Yn{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Jn,n=e=>{let t=e,n=dn;for(;n===dn;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{var o,s,i,a;let c=null;(null===(s=null===(o=r.getRootNode)||void 0===o?void 0:o.call(r))||void 0===s?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&r.getRootNode().host&&(c=r.getRootNode().host);let u=c;for(;(null===(a=null===(i=null==u?void 0:u.getRootNode)||void 0===i?void 0:i.call(u))||void 0===a?void 0:a.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&u.getRootNode().host;)u=u.getRootNode().host;const l=!(this.doc.contains(r)||u&&this.doc.contains(u));if(!r.parentNode||l)return;const d=$t(r.parentNode)?this.mirror.getId(c):this.mirror.getId(r.parentNode),h=n(r);if(-1===d||-1===h)return t.addNode(r);const p=xn(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{qn(e,this.mirror)&&this.iframeManager.addIframe(e),Gn(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Vn(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});p&&e.push({parentId:d,nextId:h,node:p})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of Array.from(this.movedSet.values()))$n(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||r(e);for(const e of Array.from(this.addedSet.values()))tr(this.droppedSet,e)||$n(this.removes,e,this.mirror)?tr(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let o=null;for(;t.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),r=n(o.value);-1!==t&&-1!==r&&(e=o)}if(!e)for(let r=t.length-1;r>=0;r--){const o=t.get(r);if(o){const t=this.mirror.getId(o.value.parentNode);if(-1===n(o.value))continue;if(-1!==t){e=o;break}{const t=o.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const n=t.parentNode.host;if(-1!==this.mirror.getId(n)){e=o;break}}}}}if(!e){for(;t.head;)t.removeNode(t.head.value);break}o=e.previous,t.removeNode(e.value),r(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>({id:this.mirror.getId(e.node),attributes:e.attributes}))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!Un(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Dn(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:An(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(n=on({maskInputOptions:this.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),Dn(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue)return;let r=this.attributes.find((t=>t.node===e.target));if("IFRAME"===t.tagName&&"src"===e.attributeName&&!this.keepIframeSrcFn(n)){if(t.contentDocument)return;e.attributeName="rr_src"}if(r||(r={node:e.target,attributes:{}},this.attributes.push(r)),"style"===e.attributeName){const n=this.doc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue),void 0!==r.attributes.style&&null!==r.attributes.style||(r.attributes.style={});const o=r.attributes.style;for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r===n.style.getPropertyValue(e)&&s===n.style.getPropertyPriority(e)||(o[e]=""===s?r:[r,s])}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o[e]=!1)}else r.attributes[e.attributeName]=Sn(this.doc,t.tagName,e.attributeName,n);break}case"childList":if(Dn(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=$t(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Dn(e.target,this.blockClass,this.blockSelector,!1)||Un(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Xn(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Bn(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Qn(n,r)]?Xn(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!$t(e.target)||!en(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(this.mirror.hasNode(e)){if(Un(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Qn(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Dn(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach((e=>this.genAdds(e)))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Xn(e,t){e.delete(t),t.childNodes.forEach((t=>Xn(e,t)))}function $n(e,t,n){return 0!==e.length&&er(e,t,n)}function er(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||er(e,r,n)}function tr(e,t){return 0!==e.size&&nr(e,t)}function nr(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||nr(e,n))}const rr=[],or="undefined"!=typeof CSSGroupingRule,sr="undefined"!=typeof CSSMediaRule,ir="undefined"!=typeof CSSSupportsRule,ar="undefined"!=typeof CSSConditionRule;function cr(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function ur(e,t){var n,r;const o=new Yn;rr.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const i=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");i&&window[i]&&(s=window[i]);const a=new s(o.processMutations.bind(o));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function lr({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const i=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,a=[];return Object.keys(zn).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e])).forEach((s=>{const i=s.toLowerCase(),c=(t=>s=>{const i=cr(s);if(Dn(i,r,o,!0))return;const a=Wn(s)?s.changedTouches[0]:s;if(!a)return;const c=n.getId(i),{clientX:u,clientY:l}=a;e({type:zn[t],id:c,x:u,y:l})})(s);a.push(Tn(i,c,t))})),()=>{a.forEach((e=>e()))}}function dr({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:s}){return Tn("scroll",Rn((s=>{const i=cr(s);if(!i||Dn(i,r,o,!0))return;const a=n.getId(i);if(i===t){const n=t.scrollingElement||t.documentElement;e({id:a,x:n.scrollLeft,y:n.scrollTop})}else e({id:a,x:i.scrollLeft,y:i.scrollTop})}),s.scroll||100),t)}function hr(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const pr=["INPUT","TEXTAREA","SELECT"],fr=new WeakMap;function mr(e){return function(e,t){if(or&&e.parentRule instanceof CSSGroupingRule||sr&&e.parentRule instanceof CSSMediaRule||ir&&e.parentRule instanceof CSSSupportsRule||ar&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function gr(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function yr({mirror:e,stylesheetManager:t},n){var r,o,s;let i=null;i="#document"===n.nodeName?e.getId(n):e.getId(n.host);const a="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(s=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===s?void 0:s.ShadowRoot,c=Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets");return null!==i&&-1!==i&&a&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==i&&-1!==i)try{t.adoptStyleSheets(e,i)}catch(e){}return r}}),()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}):()=>{}}function vr(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:i,inputCb:a,mediaInteractionCb:c,styleSheetRuleCb:u,styleDeclarationCb:l,canvasMutationCb:d,fontCb:h,selectionCb:p}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),s(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),i(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),a(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),l(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)}}(e,t);const r=ur(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=Rn((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null}),s),u=Rn((e=>{const t=cr(e),{clientX:n,clientY:o}=Wn(e)?e.changedTouches[0]:e;i||(i=Date.now()),a.push({x:n,y:o,id:r.getId(t),timeOffset:Date.now()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?jn.Drag:e instanceof MouseEvent?jn.MouseMove:jn.TouchMove)}),o,{trailing:!1}),l=[Tn("mousemove",u,n),Tn("touchmove",u,n),Tn("drag",u,n)];return()=>{l.forEach((e=>e()))}}(e),s=lr(e),i=dr(e),a=function({viewportResizeCb:e}){let t=-1,n=-1;return Tn("resize",Rn((()=>{const r=Ln(),o=Fn();t===r&&n===o||(e({width:Number(o),height:Number(r)}),t=r,n=o)}),200),window)}(e),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:s,maskInputOptions:i,maskInputFn:a,sampling:c,userTriggeredOnInput:u}){function l(e){let n=cr(e);const c=e.isTrusted;if(n&&"OPTION"===n.tagName&&(n=n.parentElement),!n||!n.tagName||pr.indexOf(n.tagName)<0||Dn(n,r,o,!0))return;const l=n.type;if(n.classList.contains(s))return;let h=n.value,p=!1;"radio"===l||"checkbox"===l?p=n.checked:(i[n.tagName.toLowerCase()]||i[l])&&(h=on({maskInputOptions:i,tagName:n.tagName,type:l,value:h,maskInputFn:a})),d(n,hr({text:h,isChecked:p,userTriggered:c},u));const f=n.name;"radio"===l&&f&&p&&t.querySelectorAll(`input[type="radio"][name="${f}"]`).forEach((e=>{e!==n&&d(e,hr({text:e.value,isChecked:!p,userTriggered:!1},u))}))}function d(t,r){const o=fr.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){fr.set(t,r);const o=n.getId(t);e(Object.assign(Object.assign({},r),{id:o}))}}const h=("last"===c.input?["change"]:["input","change"]).map((e=>Tn(e,l,t))),p=t.defaultView;if(!p)return()=>{h.forEach((e=>e()))};const f=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value"),m=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return f&&f.set&&h.push(...m.map((e=>On(e[0],e[1],{set(){l({target:this})}},!1,p)))),()=>{h.forEach((e=>e()))}}(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o}){const s=s=>Rn((o=>{const i=cr(o);if(!i||Dn(i,t,n,!0))return;const{currentTime:a,volume:c,muted:u,playbackRate:l}=i;e({type:s,id:r.getId(i),currentTime:a,volume:c,muted:u,playbackRate:l})}),o.media||500),i=[Tn("play",s(0)),Tn("pause",s(1)),Tn("seeked",s(2)),Tn("volumechange",s(3)),Tn("ratechange",s(4))];return()=>{i.forEach((e=>e()))}}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(r,s){const{id:i,styleId:a}=gr(this,t,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&e({id:i,styleId:a,adds:[{rule:r,index:s}]}),o.apply(this,[r,s])};const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=function(r){const{id:o,styleId:i}=gr(this,t,n.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,removes:[{index:r}]}),s.apply(this,[r])},r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=function(r){const{id:o,styleId:s}=gr(this,t,n.styleMirror);return(o&&-1!==o||s&&-1!==s)&&e({id:o,styleId:s,replace:r}),i.apply(this,[r])}),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=function(r){const{id:o,styleId:s}=gr(this,t,n.styleMirror);return(o&&-1!==o||s&&-1!==s)&&e({id:o,styleId:s,replaceSync:r}),a.apply(this,[r])});const c={};or?c.CSSGroupingRule=r.CSSGroupingRule:(sr&&(c.CSSMediaRule=r.CSSMediaRule),ar&&(c.CSSConditionRule=r.CSSConditionRule),ir&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(o,s){const{id:i,styleId:a}=gr(this.parentStyleSheet,t,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&e({id:i,styleId:a,adds:[{rule:o,index:[...mr(this),s||0]}]}),u[r].insertRule.apply(this,[o,s])},o.prototype.deleteRule=function(o){const{id:s,styleId:i}=gr(this.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||i&&-1!==i)&&e({id:s,styleId:i,removes:[{index:[...mr(this),o]}]}),u[r].deleteRule.apply(this,[o])}})),()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}}(e,{win:n}),d=yr(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(o,i,a){var c;if(n.has(o))return s.apply(this,[o,i,a]);const{id:u,styleId:l}=gr(null===(c=this.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,set:{property:o,value:i,priority:a},index:mr(this.parentRule)}),s.apply(this,[o,i,a])};const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(o){var s;if(n.has(o))return i.apply(this,[o]);const{id:a,styleId:c}=gr(null===(s=this.parentRule)||void 0===s?void 0:s.parentStyleSheet,t,r.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,remove:{property:o},index:mr(this.parentRule)}),i.apply(this,[o])},()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}}(e,{win:n}),p=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=_n(t.fonts,"add",(function(t){return function(n){return setTimeout((()=>{const t=o.get(n);t&&(e(t),o.delete(n))}),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),()=>{r.forEach((e=>e()))}}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:s}=e;let i=!0;const a=()=>{const e=t.getSelection();if(!e||i&&(null==e?void 0:e.isCollapsed))return;i=e.isCollapsed||!1;const a=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const s=e.getRangeAt(t),{startContainer:i,startOffset:c,endContainer:u,endOffset:l}=s;Dn(i,r,o,!0)||Dn(u,r,o,!0)||a.push({start:n.getId(i),startOffset:c,end:n.getId(u),endOffset:l})}s({ranges:a})};return a(),Tn("selectionchange",a)}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,n,t.options));return()=>{rr.forEach((e=>e.reset())),r.disconnect(),o(),s(),i(),a(),c(),u(),l(),d(),h(),p(),f(),m.forEach((e=>e()))}}class br{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Ir{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new br(hn),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new br(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"===e.data.type){if(!e.source)return;const t=this.crossOriginIframeMap.get(e.source);if(!t)return;const n=this.transformCrossOriginEvent(t,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}}transformCrossOriginEvent(e,t){var n;switch(t.type){case Zn.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:Zn.IncrementalSnapshot,data:{source:jn.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case Zn.Meta:case Zn.Load:case Zn.DomContentLoaded:return!1;case Zn.Plugin:return t;case Zn.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Zn.IncrementalSnapshot:switch(t.data.source){case jn.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case jn.Drag:case jn.TouchMove:case jn.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case jn.ViewportResize:return!1;case jn.MediaInteraction:case jn.MouseInteraction:case jn.Scroll:case jn.CanvasMutation:case jn.Input:return this.replaceIds(t.data,e,["id"]),t;case jn.StyleSheetRule:case jn.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case jn.Font:return t;case jn.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case jn.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}}class Cr{constructor(e){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;const t=this;this.restorePatches.push(_n(Element.prototype,"attachShadow",(function(e){return function(n){const r=e.call(this,n);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),r}})))}addShadowRoot(e,t){en(e)&&(this.shadowDoms.has(e)||(this.shadowDoms.add(e),ur(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),dr(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),yr({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e)}),0)))}observeAttachShadow(e){if(e.contentWindow){const t=this;this.restorePatches.push(_n(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(r){const o=n.call(this,r);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),o}})))}}reset(){this.restorePatches.forEach((e=>e())),this.shadowDoms=new WeakSet}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function Sr(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))}for(var wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ar="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Er=0;Er<64;Er++)Ar[wr.charCodeAt(Er)]=Er;const kr=new Map;const xr=(e,t,n)=>{if(!e||!Mr(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=kr.get(e);return n||(n=new Map,kr.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Tr(e,t,n){if(e instanceof Array)return e.map((e=>Tr(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=wr[n[t]>>2],o+=wr[(3&n[t])<<4|n[t+1]>>4],o+=wr[(15&n[t+1])<<2|n[t+2]>>6],o+=wr[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Tr(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Tr(e.data,t,n),e.width,e.height]}}if(Mr(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:xr(e,t,n)}}return e}const Nr=(e,t,n)=>[...e].map((e=>Tr(e,t,n))),Mr=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Rr(e,t,n){const r=[];try{const o=_n(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r,...o){return Dn(this,t,n,!0)||"__context"in this||(this.__context=r),e.apply(this,[r,...o])}}));r.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach((e=>e()))}}function Or(e,t,n,r,o,s,i){const a=[],c=Object.getOwnPropertyNames(e);for(const s of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const c=_n(e,s,(function(e){return function(...a){const c=e.apply(this,a);if(xr(c,i,this),!Dn(this.canvas,r,o,!0)){const e=Nr([...a],i,this),r={type:t,property:s,args:e};n(this.canvas,r)}return c}}));a.push(c)}catch(r){const o=On(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});a.push(o)}return a}var _r=null;try{var Lr="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads");_r=Lr.Worker}catch(It){}function Fr(e,t,n){var r=void 0===t?null:t,o=function(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}(e,void 0!==n&&n),s=o.indexOf("\n",10)+1,i=o.substring(s)+(r?"//# sourceMappingURL="+r:"");return function(e){return new _r(i,Object.assign({},e,{eval:!0}))}}function Dr(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,s=n.length;o<s;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),s=o.indexOf("\n",10)+1,i=o.substring(s)+(r?"//# sourceMappingURL="+r:""),a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}var Ur="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var Br,Wr,qr,Gr=(Br="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Wr=null,qr=!1,Ur?Fr(Br,Wr,qr):function(e,t,n){var r;return function(o){return r=r||Dr(e,t,n),new Worker(r,o)}}(Br,Wr,qr));class Vr{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:s,dataURLOptions:i}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,s&&"all"===t&&this.initCanvasMutationObserver(n,r,o),s&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:i})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,r,o){const s=Rr(t,n,r),i=new Map,a=new Gr;a.onmessage=e=>{const{id:t}=e.data;if(i.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:s}=e.data;this.mutationCb({id:t,type:Kn["2D"],commands:[{property:"clearRect",args:[0,0,o,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let u,l=0;const d=e=>{l&&e-l<c||(l=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{Dn(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Sr(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(i.get(n))return;if(i.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&(null==n||n.clear(n.COLOR_BUFFER_BIT))}const r=yield createImageBitmap(e);a.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),u=requestAnimationFrame(d)};u=requestAnimationFrame(d),this.resetObservers=()=>{s(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=Rr(e,t,n),o=function(e,t,n,r){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[i])continue;const s=_n(t.CanvasRenderingContext2D.prototype,i,(function(o){return function(...s){return Dn(this.canvas,n,r,!0)||setTimeout((()=>{const n=Nr([...s],t,this);e(this.canvas,{type:Kn["2D"],property:i,args:n})}),0),o.apply(this,s)}}));o.push(s)}catch(n){const r=On(t.CanvasRenderingContext2D.prototype,i,{set(t){e(this.canvas,{type:Kn["2D"],property:i,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),s=function(e,t,n,r){const o=[];return o.push(...Or(t.WebGLRenderingContext.prototype,Kn.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...Or(t.WebGL2RenderingContext.prototype,Kn.WebGL2,e,n,r,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class Pr{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Pn,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const n=Array.from(t.rules||CSSRule);r.push({styleId:e,rules:n.map(((e,t)=>({rule:nn(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}function Zr(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let jr,zr,Kr,Hr=!1;const Jr=new rn;function Qr(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:i="rr-ignore",maskTextClass:a="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:l,maskInputOptions:d,slimDOMOptions:h,maskInputFn:p,maskTextFn:f,hooks:m,packFn:g,sampling:y={},dataURLOptions:v={},mousemoveWait:b,recordCanvas:I=!1,recordCrossOriginIframes:C=!1,userTriggeredOnInput:S=!1,collectFonts:w=!1,inlineImages:A=!1,plugins:E,keepIframeSrcFn:k=()=>!1,ignoreCSSAttributes:x=new Set([])}=e,T=!C||window.parent===window;let N=!1;if(!T)try{window.parent.document,N=!1}catch(e){N=!0}if(T&&!t)throw new Error("emit function is required");void 0!==b&&void 0===y.mousemove&&(y.mousemove=b),Jr.reset();const M=!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},R=!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===h,headMetaDescKeywords:"all"===h}:h||{};let O;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let _=0;const L=e=>{for(const t of E||[])t.eventProcessor&&(e=t.eventProcessor(e));return g&&(e=g(e)),e};jr=(e,o)=>{var s;if(!(null===(s=rr[0])||void 0===s?void 0:s.isFrozen())||e.type===Zn.FullSnapshot||e.type===Zn.IncrementalSnapshot&&e.data.source===jn.Mutation||rr.forEach((e=>e.unfreeze())),T)null==t||t(L(e),o);else if(N){const t={type:"rrweb",event:L(e),isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===Zn.FullSnapshot)O=e,_=0;else if(e.type===Zn.IncrementalSnapshot){if(e.data.source===jn.Mutation&&e.data.isAttachIframe)return;_++;const t=r&&_>=r,o=n&&e.timestamp-O.timestamp>n;(t||o)&&zr(!0)}};const F=e=>{jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.Mutation},e)}))},D=e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.Scroll},e)})),U=e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.CanvasMutation},e)})),B=new Pr({mutationCb:F,adoptedStyleSheetCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.AdoptedStyleSheet},e)}))}),W=new Ir({mirror:Jr,mutationCb:F,stylesheetManager:B,recordCrossOriginIframes:C,wrappedEmit:jr});for(const e of E||[])e.getMirror&&e.getMirror({nodeMirror:Jr,crossOriginIframeMirror:W.crossOriginIframeMirror,crossOriginIframeStyleMirror:W.crossOriginIframeStyleMirror});Kr=new Vr({recordCanvas:I,mutationCb:U,win:window,blockClass:o,blockSelector:s,mirror:Jr,sampling:y.canvas,dataURLOptions:v});const q=new Cr({mutationCb:F,scrollCb:D,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:M,dataURLOptions:v,maskTextFn:f,maskInputFn:p,recordCanvas:I,inlineImages:A,sampling:y,slimDOMOptions:R,iframeManager:W,stylesheetManager:B,canvasManager:Kr,keepIframeSrcFn:k},mirror:Jr});zr=(e=!1)=>{var t,n,r,i,l,d;jr(Zr({type:Zn.Meta,data:{href:window.location.href,width:Fn(),height:Ln()}}),e),B.reset(),rr.forEach((e=>e.lock()));const h=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new rn:r,s=n.blockClass,i=void 0===s?"rr-block":s,a=n.blockSelector,c=void 0===a?null:a,u=n.maskTextClass,l=void 0===u?"rr-mask":u,d=n.maskTextSelector,h=void 0===d?null:d,p=n.inlineStylesheet,f=void 0===p||p,m=n.inlineImages,g=void 0!==m&&m,y=n.recordCanvas,v=void 0!==y&&y,b=n.maskAllInputs,I=void 0!==b&&b,C=n.maskTextFn,S=n.maskInputFn,w=n.slimDOM,A=void 0!==w&&w,E=n.dataURLOptions,k=n.preserveWhiteSpace,x=n.onSerialize,T=n.onIframeLoad,N=n.iframeLoadTimeout,M=n.onStylesheetLoad,R=n.stylesheetLoadTimeout,O=n.keepIframeSrcFn;return xn(e,{doc:e,mirror:o,blockClass:i,blockSelector:c,maskTextClass:l,maskTextSelector:h,skipChild:!1,inlineStylesheet:f,maskInputOptions:!0===I?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===I?{password:!0}:I,maskTextFn:C,maskInputFn:S,slimDOMOptions:!0===A||"all"===A?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===A,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===A?{}:A,dataURLOptions:E,inlineImages:g,recordCanvas:v,preserveWhiteSpace:k,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:R,keepIframeSrcFn:void 0===O?function(){return!1}:O,newlyAddedElement:!1})}(document,{mirror:Jr,blockClass:o,blockSelector:s,maskTextClass:a,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:M,maskTextFn:f,slimDOM:R,dataURLOptions:v,recordCanvas:I,inlineImages:A,onSerialize:e=>{qn(e,Jr)&&W.addIframe(e),Gn(e,Jr)&&B.trackLinkElement(e),Vn(e)&&q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{W.attachIframe(e,t),q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{B.attachLinkElement(e,t)},keepIframeSrcFn:k});if(!h)return console.warn("Failed to snapshot the document");jr(Zr({type:Zn.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(l=null===(i=null===document||void 0===document?void 0:document.body)||void 0===i?void 0:i.parentElement)||void 0===l?void 0:l.scrollTop)||(null===(d=null===document||void 0===document?void 0:document.body)||void 0===d?void 0:d.scrollTop)||0}}})),rr.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&B.adoptStyleSheets(document.adoptedStyleSheets,Jr.getId(document))};try{const e=[];e.push(Tn("DOMContentLoaded",(()=>{jr(Zr({type:Zn.DomContentLoaded,data:{}}))})));const t=e=>{var t;return vr({mutationCb:F,mousemoveCb:(e,t)=>jr(Zr({type:Zn.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.MouseInteraction},e)})),scrollCb:D,viewportResizeCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.ViewportResize},e)})),inputCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.Input},e)})),mediaInteractionCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.MediaInteraction},e)})),styleSheetRuleCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.StyleSheetRule},e)})),styleDeclarationCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.StyleDeclaration},e)})),canvasMutationCb:U,fontCb:e=>jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.Font},e)})),selectionCb:e=>{jr(Zr({type:Zn.IncrementalSnapshot,data:Object.assign({source:jn.Selection},e)}))},blockClass:o,ignoreClass:i,maskTextClass:a,maskTextSelector:c,maskInputOptions:M,inlineStylesheet:u,sampling:y,recordCanvas:I,inlineImages:A,userTriggeredOnInput:S,collectFonts:w,doc:e,maskInputFn:p,maskTextFn:f,keepIframeSrcFn:k,blockSelector:s,slimDOMOptions:R,dataURLOptions:v,mirror:Jr,iframeManager:W,stylesheetManager:B,shadowDomManager:q,canvasManager:Kr,ignoreCSSAttributes:x,plugins:(null===(t=null==E?void 0:E.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>jr(Zr({type:Zn.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},m)};W.addLoadListener((n=>{e.push(t(n.contentDocument))}));const n=()=>{zr(),e.push(t(document)),Hr=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():e.push(Tn("load",(()=>{jr(Zr({type:Zn.Load,data:{}})),n()}),window)),()=>{e.forEach((e=>e())),Hr=!1}}catch(e){console.warn(e)}}Qr.addCustomEvent=(e,t)=>{if(!Hr)throw new Error("please add custom event after start recording");jr(Zr({type:Zn.Custom,data:{tag:e,payload:t}}))},Qr.freezePage=()=>{rr.forEach((e=>e.freeze()))},Qr.takeFullSnapshot=e=>{if(!Hr)throw new Error("please take full snapshot after start recording");zr(e)},Qr.mirror=Jr;const Yr=new class extends Wt{eventChunkHistory=[];stream=new j;constructor(){super()}get currentRrHistory(){return this.eventChunkHistory}init(){("complete"===document.readyState?Promise.resolve():ve(ke(window,"load"))).then((()=>{const e=this,t=Qr({emit(t){e.stream.next(t)},sampling:{scroll:150,media:800,mousemove:100},recordCanvas:!1,maskAllInputs:!0,blockClass:new RegExp(["pz-ignore","fs-exclude"].join("|")),slimDOMOptions:"all",inlineImages:!1,inlineStylesheet:!1,checkoutEveryNms:6e5});this.destructors.push((()=>t())),this.subscribe(Oe(Ue,this.stream.pipe(_e(Ue))),(([e,t])=>{this.sendResources(e,t)}))}))}sendResources(e,t){if(0===t.length)return;const n=JSON.stringify(t),r=bt(n);t.some((e=>e.type===Zn.FullSnapshot))&&(this.eventChunkHistory=[]),this.eventChunkHistory.push(r),Vt.queueResource(e,"Track","rr-events",{content:n,contentType:"application/json",checksum:r})}};const Xr={},$r=new j(1);function eo(){return Ht().replaceAll("-","")}function to(){return function(e){let t="";const n="0123456789abcdef";let r=0;for(;r<e;)t+=n.charAt(Math.floor(16*Math.random())),r+=1;return t}(16)}!function(){const e=function(e,t,n){let r;return function(){const o=this,s=arguments,i=n&&!r;clearTimeout(r),r=setTimeout((()=>{r=null,n||e.apply(o,s)}),t),i&&e.apply(o,s)}}((()=>function(e=!1){if($r&&!e)return Promise.resolve();const t=Array.from(document.styleSheets).filter((e=>!e.disabled)).map((e=>{if(function(e){const t=e.href,n=e.ownerNode,r=n?.innerText?.trim(),o=!!r&&r.length>0;return!t&&!o&&e.cssRules}(e))return Promise.resolve("");try{return Promise.resolve(Array.from(e.cssRules).map((e=>e.cssText?.replace(/url\(["']?(.+?)["']?\)/g,((e,t)=>{if(t.match(/^(data:|#|http)/))return e;if(t.startsWith("/"))return`url("${document.location.origin+t}")`;const n="/"==document.location.pathname?"":document.location.pathname;return document.location.origin+n+"/"+t})))).join(""))}catch(n){return t=e.href,new Promise((e=>{Xr[t]?e(Xr[t]):t?fetch(t).then((t=>{200===t.status?t.text().then((t=>e(t))):e("")})).catch((()=>e(""))):e("")})).then((e=>(Xr[e]=e,e)))}var t}));return new Promise((e=>{Promise.all(t).then((e=>e.filter(Boolean).join("\n"))).then((t=>{$r.next({content:t,checksum:bt(t),contentType:"text/css"}),e()}))}))}(!0)),50,!1);wt(e);new MutationObserver(((t,n)=>{let r=!1;for(const e of t)if("attributes"===e.type||"childList"===e.type){for(const t of Array.from(e.addedNodes).concat(Array.from(e.removedNodes)))if(["style","link"].includes(t?.tagName?.toLowerCase())){r=!0;break}}else"characterData"===e.type&&["style","link"].includes(e.target?.tagName?.toLowerCase())&&(r=!0);r&&e()})).observe(document.head,{subtree:!0,childList:!0,characterData:!0})}();const no="playerzero";function ro(e,t){window[no]||so(),window[no][e]=t}function oo(e){return window[no]||so(),window[no][e]}function so(){window[no]={}}const io=new class extends Wt{stream=new j(1);constructor(){super(),ro("track",((e,t)=>{this.stream.next({element:null,priority:Number.MAX_VALUE,type:"Analytics",value:e,ts:Et(),attributes:t,properties:{}})}))}};function ao(e,t=!0){try{return e()}catch(e){return t||console.error(e),null}}var co;!function(e){e.email="email",e.tel="tel",e.creditcard="creditcard",e.letters="letters",e.numbers="numbers",e.mix="mix"}(co||(co={}));class uo extends Wt{static VALUE_MAP=[{regex:/^(.*)@(.*)\.(.{2,5})$/,type:co.email},{regex:/^(\+\d{1,2}\s?)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$/,type:co.tel},{regex:/^\b(?:\d[ -]*?){13,16}\b$/,type:co.creditcard},{regex:/^[A-z]+$/,type:co.letters},{regex:/^[0-9]+$/,type:co.numbers},{regex:/.*/,type:co.mix}];stream=new j(1);constructor(){super(),this.listen("change",this.changeListener.bind(this)),this.inputListener()}getInputElementValue(e){const t=e;return t.isContentEditable&&"input"!==t.tagName.toLowerCase()?t.innerText:t.value||null}getSelectText(e){const t=e;return t[t.selectedIndex]?.innerText??""}isChangeElement(e){return["input","textarea"].includes(e.tagName.toLowerCase())}inputListener(){this.subscribe(Ne(ke(document,"input"),ke(document,"keydown"),ke(document,"keyup"),ke(document,"change")).pipe(Re((e=>Ve(at.getCleanedElement(e.target)))),be((e=>{const t=at.getCleanedElement(e.target);return{element:t,type:"Fill",value:Ke(t),ts:new Date,properties:{content:this.getInputElementValue(t)},attributes:{},priority:2}})),Re((e=>Boolean(e))),Le(200)),(e=>{ao((()=>{e?.element?.getAttribute("_pz_last")!==e?.properties?.content?.length?.toString()&&(e.element.setAttribute("_pz_last",e.properties.content.length.toString()),this.stream.next(e))}))}))}changeListener(e){const t=at.getCleanedElement(e.target);if(Ve(t)){const e=this.getInputElementValue(t);if(!e||t.getAttribute("_pz_last")===e?.length?.toString())return;t.setAttribute("_pz_last",(e?.length??0).toString()),this.stream.next({element:t,type:"Fill",value:Ke(t),ts:new Date,properties:{content:this.getInputElementValue(t)},attributes:{},priority:2})}else"select-one"===t.type||"select"===t.type||"select"===t.tagName.toLowerCase()?this.stream.next({element:t,type:"Select",value:Ke(t),ts:new Date,properties:{selectedOption:this.getInputElementValue(t),selectedText:this.getSelectText(t)},attributes:{},priority:2}):"checkbox"===t.type||"radio"===t.type?this.stream.next({element:t,type:t.checked?"Check":"Uncheck",value:Ke(t),ts:new Date,properties:{},attributes:{},priority:2}):"file"===t.type?this.stream.next({element:t,type:"Upload",value:Ke(t)||this.getInputElementValue(t),ts:new Date,properties:{},attributes:{},priority:2}):Qe.debug(`Unsupported change event logged ${e.type}`,e)}}const lo=new uo;class ho{url;static URL_CLEANERS=[/[0-9a-fA-F]{8}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{4}-?[0-9a-fA-F]{12}/g,/^[0-9a-fA-F]{24}$/,/[0-9]/,/@/];protocol;host;path;reference;query;port;pathRef;constructor(e){this.url=e;const t=new URL(e);this.protocol=t.protocol,this.host=t.hostname,this.path=t.pathname,this.reference=t.hash?t.hash.substr(1).replace(/\?(.*)/,""):null,this.query=t.search||null,this.port=Number(t.port)||-1,this.pathRef=`${this.path}${this.reference?`#${this.reference}`:""}`}static stripVars(e){return e.split("/").map((e=>this.URL_CLEANERS.some((t=>t.test(e)))?"*":e)).join("/")}strippedPathRef(){return`${ho.stripVars(this.path)}${this.reference?`#${ho.stripVars(this.reference)}`:""}`}}const po=new class extends Wt{lastATagClick;stream=new j(1);constructor(){super();const e=this;window.addEventListener("popstate",(()=>{"visible"===document.visibilityState&&this.recomputeLocation()}),!1),window.addEventListener("hashchange",(()=>{"visible"===document.visibilityState&&this.recomputeLocation()}));const t=history.pushState;history.pushState=function(){const n=t.apply(this,arguments);return"visible"===document.visibilityState&&e.recomputeLocation(),n};const n=history.replaceState;history.replaceState=function(){const t=n.apply(this,arguments);return"visible"===document.visibilityState&&e.recomputeLocation(),t},this.subscribe(Ne(ke(document,"mousedown"),ke(document,"touchstart")).pipe(be((e=>at.getCleanedElement(e.target))),Re((e=>"a"===e.tagName.toLowerCase())),Re((e=>Boolean(He(e))))),(e=>{this.lastATagClick={text:He(e),ts:new Date,element:e}}))}generateCurrentLocationTrackedEvent(){const e=document.location.href,t=new ho(e),n=this.lastATagClick&&Date.now()-this.lastATagClick.ts.getTime()<500?this.lastATagClick:void 0;return{element:n?.element||document.documentElement,ts:new Date,type:"Navigate",value:t.strippedPathRef()+(n?` (${n.text})`:""),properties:{url:e},attributes:{},priority:2}}recomputeLocation(e=!1){const t=document.location.href;(Yt.getStorageData("LastPage")!==t||e)&&(Yt.setStorageData("LastPage",t),this.stream.next(this.generateCurrentLocationTrackedEvent()))}};class fo extends Wt{static rageConfig={maxTimeMs:500,numConsecutive:3};stream=new j(1);lastClick={element:null,ts:Date.now(),numConsecutive:0};constructor(){super(),this.listen("click",(e=>{const t=at.getCleanedElement(e.target);if("a"===t.tagName.toLowerCase())return;const n=He(t);n&&this.stream.next({element:t,ts:new Date,type:"Click",value:n,attributes:{},properties:{tag:t.tagName?.toLowerCase()},priority:1})})),this.listen("mousedown",this.rageClicks.bind(this))}rageClicks(e){const t=at.getCleanedElement(e.target);if(this.lastClick.element===t&&Date.now()-this.lastClick.ts<fo.rageConfig.maxTimeMs){if(this.lastClick.numConsecutive++,this.lastClick.ts=Date.now(),this.lastClick.numConsecutive===fo.rageConfig.numConsecutive){const e=He(t);e&&this.stream.next({element:t,ts:new Date,type:"Click",value:e,attributes:{tag:t.tagName?.toLowerCase()},properties:{},priority:1})}}else this.lastClick.numConsecutive=1,this.lastClick.element=t,this.lastClick.ts=Date.now()}}const mo=new fo;const go=new class extends Wt{stream=Ne(lo.stream,po.stream,mo.stream,io.stream);constructor(){super(),this.traceId,this.subscribe(Ne(ke(document,"mousedown"),ke(document,"keydown"),ke(document,"touchstart"),ke(document,"input")).pipe(be((e=>at.getCleanedElement(e.target))),Re((e=>Boolean(He(e)))),Le(10)),(e=>this.preemptTrace(e))),this.subscribe(ke(window,"beforeunload"),(()=>this.flushTrace(!0))),this.subscribe(this.stream,(e=>{e.element=e.element||this.trace.element,this.preemptTrace(e.element),this.trace.buffer.push(e)}))}get traceId(){return this.trace.traceId}get rootSpanId(){return this.trace.rootSpanId}_trace;get trace(){if(this._trace)return this._trace;const e=Et(),t=po.generateCurrentLocationTrackedEvent();return t.ts=e,this.trace={traceId:eo(),rootSpanId:to(),element:document.documentElement,ts:e,buffer:[t]},this._trace}set trace(e){const t=this._trace;this._trace=e,Ue.next(e.traceId),e.traceId!==t?.traceId&&(this.triggerResourceSend(e.traceId),t&&this.sendTrackedEvent(t))}flushTrace(e=!1){this._trace&&this.sendTrackedEvent(this._trace),this._trace=void 0,e||this.traceId}preemptTrace(e){this.trace.element!==e&&(this.trace={traceId:eo(),rootSpanId:to(),element:e,buffer:[this.genBaseInteraction(e)],ts:Et()})}sendTrackedEvent(e){const t=this.highestPriorityEvent(e.buffer),n=new Date(Math.min(e.ts.getTime(),t.ts.getTime()));St.track(t.value,{id:e.traceId,ts:n,type:t.type,attributes:{url:document.location.href,agent:navigator.userAgent,viewport:`${document.documentElement.clientWidth}x${document.documentElement.clientHeight}`},properties:{...t.properties,"rr-history":JSON.stringify(Yr.currentRrHistory)}})}triggerResourceSend(e){const t=JSON.stringify(Qt.getCleanedStorage()),n=JSON.stringify(Yt.getCleanedStorage());Vt.queueResource(e,"Track","localStorage",{content:t,checksum:bt(t),contentType:"application/json"}),Vt.queueResource(e,"Track","sessionStorage",{content:n,checksum:bt(n),contentType:"application/json"}),ve($r).then((t=>{Vt.queueResource(e,"Track","styles",t)}))}genBaseInteraction(e){const t=at.getCleanedElement(e);return{element:t,attributes:{},properties:{},priority:0,type:"Interaction",value:He(t),ts:Et()}}highestPriorityEvent(e){let t;return e.forEach((e=>{(t?.priority??-1)<=e.priority&&(t=e)})),t}},yo=document.createElement("template");yo.innerHTML='\n  <style>\n    * {\n        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n        color: #fafafa;\n        font-size: 14px;\n        font-weight: 600;\n        line-height: 20px;\n    }\n\n    button {\n        background: #09090b;\n        border-top-right-radius: 6px;\n        border-bottom-right-radius: 6px;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        border: none;\n        padding: 8px;\n        cursor: pointer;\n        transition-property: all;\n        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        transition-duration: 150ms;\n    }\n\n    button:hover {\n        padding: 11px;\n        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n    }\n\n    button:active {\n        padding: 10px;\n    }\n\n    svg {\n        width: 20px;\n    }\n  </style>\n  <button id="p0-button">\n     <svg viewBox="0 0 321 320" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M98.5152 0C44.2908 0 0.333313 43.9575 0.333313 98.1818V221.818C0.333313 276.043 44.2908 320 98.5151 320H222.152C276.376 320 320.333 276.043 320.333 221.818V98.1818C320.333 43.9575 276.376 0 222.152 0H98.5152ZM257.427 62.9073H63.2456V257.089H257.427V62.9073Z" fill="white"/></svg>\n     <span id="p0-text"></span>\n  </button>\n';class vo extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.appendChild(yo.content.cloneNode(!0));const e=this.shadowRoot.getElementById("p0-button"),t=this.shadowRoot.getElementById("p0-text");e.addEventListener("mouseover",(()=>{t.style.marginLeft="10px",t.textContent="Share Devtools"})),e.addEventListener("mouseout",(()=>{t.style.marginLeft="0",t.textContent=""})),e.addEventListener("click",(()=>{Io.showModal()}))}}class bo extends Wt{constructor(){super(),window.addEventListener("message",(e=>{try{"p0close"===e.data&&document.getElementById(We)?.remove()}catch(e){}}),!1)}static isNative(e){const t=Object.prototype.toString,n=Function.prototype.toString,r=/^\[object .+?Constructor]$/,o=/^function.+?\n?\s*?\[native code].*?\n?}$/;return function(e){const s=typeof e;return"function"===s?o.test(n.call(e)):e&&"object"===s&&r.test(t.call(e))||!1}(e)}init(){if(bo.isNative(customElements.define)&&(customElements.get("playerzero-button")||customElements.define("playerzero-button",vo)),e.shortcutEnabled&&this.turnOnKeyboardShortcut(),!e.allowFeedback)return;if(!document.body)return void window.addEventListener("DOMContentLoaded",(()=>{this.init()}));document.getElementById(Be)||(document.body.appendChild(this.buildButtonFrame()),De.on("kill",(()=>{document.getElementById(Be)?.remove(),document.getElementById(We)?.remove()})))}showModal(e){window.self===window.top&&(document.getElementById(We)&&document.body.removeChild(document.getElementById(We)),document.body.appendChild(this.buildUploadModal(e)),go.flushTrace(),Vt.flushResources())}buildButtonFrame(){const e=document.createElement("playerzero-button");return e.id=Be,e.style.position="fixed",e.style.left="0px",e.style.bottom="3rem",e.style.zIndex="2147483646",e}getFrameUrl(){const t=new URLSearchParams;t.append("link",`${e.endpoint}/debug/${go.traceId}`),t.append("project",e.projectName),t.append("token","66984d43432e6c4b8a2e359b");const n=e.legacyWidget?"notify":"share";if(e.embedderSubdomain){const r=document.location.host.split(".").slice(-2).join(".");return`${document.location.protocol}//${e.embedderSubdomain}.${r}/${n}?${t.toString()}`}return`${"https://www.playerzero.ai"}/${n}?${t.toString()}`}buildUploadModal(e){const t=document.createElement("iframe");return t.setAttribute("id",We),t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),t.setAttribute("scrolling","no"),t.style.cssText="\n  position: fixed;\n  z-index: 2147483647;\n  top: 0px;\n  left: 0px;\n  width: 100vw;\n  height: 100vh;\n  background-color: transparent;\n  overscroll-behavior: none;\n  overflow: hidden;\n  ",t.allow="clipboard-write",t.setAttribute("sandbox","allow-top-navigation allow-popups allow-same-origin allow-scripts allow-forms"),t.src=this.getFrameUrl(),t}turnOnKeyboardShortcut(){window.addEventListener("keydown",(e=>{"k"===e?.key?.toLowerCase()&&(e.ctrlKey||e.metaKey)&&(this.showModal(),e.preventDefault())}))}}const Io=new bo;const Co=new class{user={anonymousId:Ht()};get identity(){return this.user}init(){const e=Yt.getStorageData("Identity")||Qt.getStorageData("Identity");if(e)this.user=e;else{const e={anonymousId:Ht()};this.user=e,Yt.setStorageData("Identity",e),Qt.setStorageData("Identity",e)}this.syncWithPzApi(),this.exposeIdentify()}exposeIdentify(){ro("identify",((e,t)=>{t=t||{};const n=JSON.parse(JSON.stringify(t));delete n.email,this.user={userId:e||void 0,email:t.email||void 0,anonymousId:this.user.anonymousId,metadata:n},Yt.setStorageData("Identity",this.user),Qt.setStorageData("Identity",this.user),this.syncWithPzApi()})),ro("setUserVars",(e=>{e=e||{};const t=JSON.parse(JSON.stringify(e));t.email&&(this.user.email=e.email,delete t.email),this.user.metadata=t,Yt.setStorageData("Identity",this.user),Qt.setStorageData("Identity",this.user),this.syncWithPzApi()}))}syncWithPzApi(){St.identify({userId:this.user.userId,anonId:this.user.anonymousId,email:this.user.email},this.user.metadata||{})}},So={longWord:/\b\w{40,}\b/,streetAddress:new RegExp("(\\d+\\s*(\\w+ ){1,2}"+/(street|st|road|rd|avenue|ave|drive|dr|loop|court|ct|circle|cir|lane|ln|boulevard|blvd|way)\.?\b/gi.source+"(\\s+"+/(apt|bldg|dept|fl|hngr|lot|pier|rm|ste|slip|trlr|unit|#)\.? *[a-z\d-]+\b/gi.source+")?)|("+/P\.? ?O\.? *Box +\d+/gi.source+")","gi"),zipcode:/^\b\d{5}\b(-\d{4})?\b$/,phoneNumber:/^(\(?\+?\d{1,2}\)?[-. ]?)?(\(?\d{3}\)?|\d{3})[-. ]?(\d{3}[-. ]?\d{4}|\b[A-Z\d]{7}\b)$/,ipAddress:/(\d{1,3}(\.\d{1,3}){3}|[\dA-F]{4}(:[\dA-F]{4}){5}(::|(:0000)+))/gi,usSocialSecurityNumber:/^\b\d{3}[ -.]\d{2}[ -.]\d{4}\b$/,emailAddress:/\b[\w-\.\+]+@([\w-]+\.)+[a-z]{2,4}\b/gi,username:/(user( ?name)?|login): \S+/gi,password:/(pass(wd|word|phrase)?|secret): \S+/gi,credentials:/(login( cred(ential)?s| info(rmation)?)?|cred(ential)?s) ?:\s*\S+\s+\/?\s*\S+/gi,cvv:/^\d{3,4}$/,card:/^\b(?:\d[ -]*?){13,16}\b$/},wo={password:/passw/i,token:/token/i,username:/username/i,email:/email/i,firstName:/first(.*)name/i,lastName:/last(.*)name/i,creditcard:/credit/i,cvv:/cvv/i};class Ao{static RESPONSE_SIZE_QUOTA=1048576;static REDACTED="<REDACTED>";static piiMasker(t,n){return"string"==typeof n&&(n.length>5e3||e.applyKeyFiltering&&e.responseKeyReplacements.some((e=>e.toLowerCase()===t.toLowerCase()))||Object.values(So).some((e=>n.match(e)))||Object.values(wo).some((e=>t.match(e))))?Ao.REDACTED:n}init(){this.xhr(),this.fetch(),this.performanceObserver()}stringToHeader(e){const t=new Headers;return e.split("\r\n").forEach((e=>{const[n,r]=e.split(/:(.*)/s);n&&r&&t.append(n.trim(),r.trim())})),t}headerToObject(e){const t={};return e.forEach(((e,n)=>t[n.toLowerCase()]=e)),t}parseBody(e,t){let n;if(t=t?.toLowerCase(),t)try{n=t.includes("application/x-www-form-urlencoded")?this.getSendableTextFromUrlEncoded(e):t.includes("multipart/form-data")?this.getSendableTextFromFormData(e):this.getSendableTextFromString(e)}catch(t){n=this.getSendableTextFromString(ao((()=>e))||"")}else n=this.getSendableTextFromString(ao((()=>e))||"");return n}getSendableTextFromUrlEncoded(e){if(null==e||0===e.length)return{text:e,textExceedsQuota:!1,operationName:void 0,contentNotSupported:!1,inferredEncodingType:"application/x-www-form-urlencoded"};const t=e.split("&"),n={};t.forEach((e=>{const t=e.split("=")[0];n[t]=decodeURIComponent(e.split("=")[1])}));const r=JSON.parse(JSON.stringify(n),Ao.piiMasker);let o="";return Object.entries(r).forEach((e=>{o.length>0&&(o+="&");const[t,n]=e;o=o+t+"="+encodeURIComponent(n.toString())})),JSON.stringify(o).length>Ao.RESPONSE_SIZE_QUOTA?{text:"",textExceedsQuota:!0,contentNotSupported:!1,operationName:void 0,inferredEncodingType:"application/x-www-form-urlencoded"}:{text:o,textExceedsQuota:!1,contentNotSupported:!1,operationName:void 0,inferredEncodingType:"application/x-www-form-urlencoded"}}getSendableTextFromFormData(e){if(null==e)return{text:e,textExceedsQuota:!1,contentNotSupported:!1,operationName:void 0,inferredEncodingType:"multipart/form-data"};const t={};e.forEach(((e,n)=>{if(e.type&&!e.type.toLowerCase().includes("text/plain"))try{JSON.parse(e)}catch(t){e="<UNSUPPORTED CONTENT TYPE>"}Reflect.has(t,n)?(Array.isArray(t[n])||(t[n]=[t[n]]),t[n].push(e)):t[n]=e}));const n=JSON.stringify(JSON.parse(JSON.stringify(t),Ao.piiMasker));return JSON.stringify(n).length>Ao.RESPONSE_SIZE_QUOTA?{text:"",textExceedsQuota:!0,contentNotSupported:!1,operationName:void 0,inferredEncodingType:"multipart/form-data"}:{text:n,textExceedsQuota:!1,contentNotSupported:!1,operationName:void 0,inferredEncodingType:"multipart/form-data"}}containsPhrase(e,t){try{return new RegExp(e).test(t)}catch(n){return t.includes(e)}}getSendableTextFromString(e,t){if(t&&(t.includes("octet-stream")||t.includes("xml")||t.includes("binary")))return{text:"",textExceedsQuota:!1,contentNotSupported:!0,operationName:void 0,inferredEncodingType:void 0};if(null==e||0===e.length)return{text:e,textExceedsQuota:!1,contentNotSupported:!1,operationName:void 0,inferredEncodingType:void 0};let n,r;try{const t=JSON.parse(e,Ao.piiMasker);r=t.operationName,n=JSON.stringify(t)}catch(t){let n=e;try{Object.values(So).forEach((e=>n=n.replace(e,Ao.REDACTED)))}catch(e){return{text:"",textExceedsQuota:!1,contentNotSupported:!0,operationName:void 0,inferredEncodingType:void 0}}return n.length>Ao.RESPONSE_SIZE_QUOTA?{text:"",textExceedsQuota:!0,contentNotSupported:!1,operationName:void 0,inferredEncodingType:void 0}:{text:n,textExceedsQuota:!1,contentNotSupported:!1,operationName:void 0,inferredEncodingType:void 0}}return JSON.stringify(n).length>Ao.RESPONSE_SIZE_QUOTA?{text:"",textExceedsQuota:!0,contentNotSupported:!1,operationName:r,inferredEncodingType:void 0}:{text:n,textExceedsQuota:!1,contentNotSupported:!1,operationName:r,inferredEncodingType:void 0}}sendNetworkEvent(t){const n=new ho(t.props.requestUrl);let r;t.props.status.length>0&&(r=Number(t.props.status));const o=t.span.endTs.getTime()-t.span.startTs.getTime();let s;if(t.resource.response.content){const n=t.resource.response.content;(e.apiErrorPhrases||[]).some((e=>!!this.containsPhrase(e,n??"")&&(s=e,!0)))}if(St.span(t.span.traceId,t.span.type,n.path,o,{id:t.span.spanId,parentId:t.span.parentSpanId,start:t.span.startTs,end:t.span.endTs,error:r&&r>=400||r<200?String(r):void 0,properties:t.props}),r>=400||r<200||s){let e=`${r} - ${t.props.method||"GET"} ${n.strippedPathRef()}`;s?e+=` - ${s}`:t.resource.response.content&&(e+=` - ${t.resource.response.content.substring(0,500)}`),St.log("ERROR",e,{id:eo(),traceId:t.span.traceId,spanId:t.span.spanId,ts:t.span.endTs,properties:t.props})}else o>e.networkPerformanceThresholdMs&&St.log("WARN",`Slow API - ${t.props.method||"GET"} ${n.strippedPathRef()}`,{id:eo(),traceId:t.span.traceId,spanId:t.span.spanId,ts:t.span.endTs});const i=e=>Object.keys(e).length>0;(i(t.resource.request.headers)||i(t.resource.response.headers)||t.resource.request.content||t.resource.response.content)&&At((()=>{const e=JSON.stringify(t.resource);Vt.queueResource(t.span.spanId,"Span","content",{checksum:bt(e),contentType:"application/json",content:e})}))}xhr(){const e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send,n=XMLHttpRequest.prototype.setRequestHeader;De.on("kill",(()=>{XMLHttpRequest.prototype.open=e,XMLHttpRequest.prototype.send=t,XMLHttpRequest.prototype.setRequestHeader=n}));const r=this;XMLHttpRequest.prototype.open=function(t,n,r,o,s){return ao((()=>{this._playerzero_data||(this._playerzero_data={resource:{request:{headers:{}},response:{headers:{}}},span:{},props:{}});const e=this._playerzero_data,r=new Request(n);e.props.requestUrl=r.url,e.span.startTs=Et(),e.span.traceId=go.traceId,e.span.parentSpanId=go.rootSpanId,e.span.spanId=to(),e.span.type="xmlhttprequest",e.props.method=t?.toUpperCase()||"GET",e.props.pageUrl=window.location.href,void 0===o&&void 0===s||(e.resource.request.headers.authorization=Ao.REDACTED),this._playerzero_data=e})),e.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){const r=n.apply(this,arguments);return ao((()=>{this._playerzero_data||(this._playerzero_data={resource:{request:{headers:{}},response:{headers:{}}},span:{},props:{}});const n=this._playerzero_data;"authorization"===e.toLowerCase()?n.resource.request.headers[e.toLowerCase()]=Ao.REDACTED:n.resource.request.headers[e.toLowerCase()]=t,this._playerzero_data=n})),r},XMLHttpRequest.prototype.send=function(){ao((()=>{this._playerzero_data||(this._playerzero_data={resource:{request:{headers:{}},response:{headers:{}}},span:{},props:{}});const e=this._playerzero_data;r.validOtelHeaderInjection(e.props.requestUrl)&&r.validCaptureDomain(e.props.requestUrl)&&this.setRequestHeader("traceparent",r.getOtelParentHeader(e.span.traceId,e.span.spanId))}));const e=arguments[0],n=this.onreadystatechange;return this.onreadystatechange=function(){if(this.readyState===this.DONE&&ao((()=>{this._playerzero_data||(this._playerzero_data={resource:{request:{headers:{}},response:{headers:{}}},span:{},props:{}});const t=this._playerzero_data;r.validCaptureDomain(t.props.requestUrl)&&(t.span.endTs=Et(),t.props.status=String(this.status),ao((()=>{const n=t.resource.request.headers["content-type"]?.toLowerCase(),o=r.parseBody(e,n?.toLowerCase());t.resource.request.contentType=n,t.resource.request.content=o.text,o.operationName&&(t.props.operationName=o.operationName)})),ao((()=>{const e=r.headerToObject(r.stringToHeader(this.getAllResponseHeaders()));t.resource.response.headers=e;const n=e["content-type"]?.toLowerCase();t.resource.response.contentType=n,ao((()=>{const e=r.parseBody(this.responseText,n);t.resource.response.content=e.text}))})),r.sendNetworkEvent(t))})),n)return n.apply(this,arguments)},t.apply(this,arguments)}}beforeFetchApply=()=>(e,t)=>{const n={resource:{request:{headers:{}},response:{headers:{}}},span:{},props:{}},r=new Request(e,t);return n.span.traceId=go.traceId,n.span.parentSpanId=go.rootSpanId,n.span.spanId=to(),n.span.type="fetch",n.span.startTs=Et(),n.props.requestUrl=r.url,n.props.method=r.method?.toUpperCase()||"GET",n.props.pageUrl=document.location.href,r.headers.forEach(((e,t)=>{"authorization"===t.toLowerCase()?n.resource.request.headers[t.toLowerCase()]=Ao.REDACTED:n.resource.request.headers[t.toLowerCase()]=e})),ao((()=>{const e=n.resource.request.headers["content-type"];n.resource.request.contentType=e;const o=t&&t.body&&"string"==typeof t.body?t.body:null,s=this.parseBody(o,e),i=new URLSearchParams(new URL(r.url).search);s.operationName?n.props.operationName=s.operationName:i.get("operationName")&&(n.props.operationName=i.get("operationName")),n.resource.request.content=s.text})),ao((()=>{if(this.validOtelHeaderInjection(r.url)&&this.validCaptureDomain(r.url)){const e=this.getOtelParentHeader(n.span.traceId,n.span.spanId);Array.isArray(t.headers)?t.headers.push(["traceparent",e]):t.headers instanceof Headers?t.headers.append("traceparent",e):"object"==typeof t.headers?t.headers.traceparent=e:t.headers||(t.headers={traceparent:e})}})),n};afterFetchApply=e=>(t,n)=>new Promise((r=>{const o=n.props.requestUrl;if(e.validCaptureDomain(o)){const e=t.clone();e.text().catch((e=>e?.toString()??"")).then((r=>{ao((()=>{n.props.status=t.status.toString(),n.span.endTs=Et();const o=this.headerToObject(e.headers);n.resource.response.headers=o;const s=o["content-type"]?.toLowerCase();s&&(n.resource.response.contentType=s),ao((()=>{const e=this.parseBody(r,s);n.resource.response.content=e.text})),this.sendNetworkEvent(n)}))})).then((()=>r())).catch((e=>{Qe.backgroundLog(`After fetch apply errored ${e}`),r()}))}else r()}));fetch(){const e=window.fetch;De.on("kill",(()=>window.fetch=e));const t=this.beforeFetchApply(),n=this.afterFetchApply(this);oo("monkey_patch_ts")?(ro("before_fetch_apply",t),ro("after_fetch_apply",n)):(window.fetch=function(r,o){let s;s="string"==typeof r?r:{...r};const i=o||{},a=t(s,i);return new Promise(((t,o)=>{e(r,i).then((e=>{n(e,a).catch((()=>{})).finally((()=>t(e)))})).catch((e=>o(e)))}))},ro("monkey_patch_ts",performance.now()))}performanceObserver(){ao((()=>{const e=new PerformanceObserver((e=>{for(const t of e.getEntries()){const e="initiatorType"in t&&("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType);if(!t.name.startsWith("blob")&&(!e||!oo("monkey_patch_ts")||t.startTime<oo("monkey_patch_ts")))try{const e=new ho(t.name);if(e.host||(e.host=window.location.host),e.protocol||(e.protocol=window.location.protocol),this.validCaptureDomain(e.url)){const n={span:{spanId:to(),parentSpanId:go.rootSpanId,traceId:go.traceId,type:t.initiatorType||"network",value:e.url,startTs:new Date(t.startTime+performance.timeOrigin),endTs:new Date(t.startTime+t.duration+performance.timeOrigin)},props:{requestUrl:e.url,pageUrl:document.location.href},resource:{}};this.sendNetworkEvent(n)}}catch(e){Qe.backgroundLog(`Likely failed generating a url from ${t.name} in performance observer ${e}`)}}}));e.observe({entryTypes:["navigation","resource"]}),De.on("kill",(()=>e.disconnect()))}))}validOtelHeaderInjection(t){if(!e.enableOtelHeaders)return!1;const n=document.location.host,r=new ho(t).host;if(n===r)return!0;return(e.enableOtelHeaderDomains||[]).filter((e=>e.startsWith("*")?r.endsWith(e.substring(1)):e===r)).length>0}validCaptureDomain(t){const n=new ho(t);return!("blob"===n.protocol||n.url.startsWith(`${e.endpoint}/api/record/`)||n.url.startsWith(e.apiEndpoint)||e.prohibitedDomains.some((e=>n.host.endsWith(e)))||e.prohibitedDomains.some((e=>{return(t=n.host,t.split(/\./).slice(-2).join(".")).endsWith(e);var t})))}getOtelParentHeader(e,t){return`00-${e}-${t}-01`}}const Eo=new Ao;class ko extends Wt{static MAX_ARG_SIZE=5e3;levelMap={debug:"DEBUG",assert:"DEBUG",trace:"TRACE",log:"INFO",info:"INFO",error:"ERROR",warn:"WARN"};constructor(){super()}init(){const e=this;Object.keys(this.levelMap).forEach((t=>{const n=console[t];console[t]=function(...r){return ao((()=>e.logLevel(t,...r))),n.apply(this,arguments)}})),this.subscribe(ke(window,"error"),(e=>{this.logLevel("error",e.error)})),this.subscribe(ke(window,"unhandledrejection"),(e=>{this.logLevel("error",e.reason||"UnhandledRejection")}))}logLevel(e,...t){const n=[];let r;for(const e of t)e instanceof Error&&e.stack?(r=e,n.push(e.stack||e.message)):"object"==typeof e?n.push(JSON.stringify(e,void 0,2)):n.push(t.toString());const o=n.filter((e=>e.length<=ko.MAX_ARG_SIZE)).join(" ");0===o.trim().length||(o.match(/go.playerzero.app\/record/g)||[]).length>3||St.log(this.levelMap[e],o,{id:eo(),traceId:go.traceId,spanId:go.rootSpanId,ts:Et(),exception:r?{message:r.message,stacktrace:r.stack,type:r.name}:void 0})}}const xo=new ko;const To=new class extends Wt{constructor(){super()}init(){this.listen("load",(()=>{this.searchForAndInitActiveFrames()})),this.searchForAndInitActiveFrames()}showModalAndStartUpload(){Io.showModal("start")}searchForAndInitActiveFrames(){const e=document.querySelector('[name="intercom-messenger-frame"]');e&&this.initButtonListener(e)}initButtonListener(e){e.hasAttribute("pz_active")||(e.contentDocument.addEventListener("mousedown",(e=>{const t=e.target;"Upload report"===t?.innerText?.trim()&&this.showModalAndStartUpload()})),e.setAttribute("pz_active","true"))}};(new class{init(){Co.init(),go.traceId,Eo.init(),xo.init(),Yr.init(),Io.init(),To.init(),this.exposeApi(),window.dispatchEvent(new Event("playerzero_ready"))}exposeApi(){ro("prompt",(()=>{Io.showModal()})),ro("devtools",(()=>`${e.endpoint}/debug/${go.traceId}`)),ro("kill",(e=>(De.emit("kill",e),!0))),ro("traceId",(()=>go.traceId)),ro("onTraceChange",(e=>{const t=Ue.subscribe(e);De.on("kill",t.unsubscribe)}))}}).init()}();